import{j as a}from"./jsx-runtime.D_zvdyIk.js";import{r as F}from"./index.0yr9KlQE.js";import{b as w}from"./base-url.BuhEC7Hq.js";import{S as Z,B as i,a as d,G as ee,L as c,I as A,P as m,D as ae}from"./BackgroundVideo.Djk_rsrv.js";function te({as:o=Z,featuredFeaturedTitle:N="The heart of her family",featuredFeaturedTitleTag:k="h3",featuredText:_="Memories and photos honoring her love and devotion to those closest to her.",featuredTagText:f="Family",smallFeature1TagText:u="Traditions",smallFeature1Title:j="Recipes and cherished rituals",smallFeature1TitleTag:s="h3",smallFeature1BodyText:x="Favorite dishes, holiday moments, and the warmth she brought to every table.",smallFeature2TagText:b="Travel",smallFeature2Title:r="Journeys and new horizons",smallFeature2TitleTag:n="h3",smallFeature2Text:l="Photos and stories from adventures that sparked her joy and curiosity.",smallFeature2Image:p="https://cdn.prod.website-files.com/69219eaa23d0fd8b7effe1fe/69219fe3ace6d8206cfc4d8f_de1ab5b8-1007-400f-9ae2-1c7a75738f98.avif",smallFeature1Image:y="https://cdn.prod.website-files.com/69219eaa23d0fd8b7effe1fe/69219fe3b36d2cab360906cb_627e067d-8a03-4693-8344-eff8407c4a73.avif",textFeature1TagText:S="h3",textFeature1Title:v="Kindness remembered",textFeature1Text:g="Moments when her caring spirit made a difference for others.",textFeature2TagText:e="h3",textFeature2Title:t="A lifelong learner",textFeature2Text:h="How her curiosity and wisdom inspired everyone she met.",textFeature3Title:T="Laughter shared",textFeature3TitleTag:K="h3",textFeature3Text:R="Stories that capture her humor and the light she brought to every day.",textFeature4Tag:E="h3",textFeature5Tag:M="h3",textFeature5Text:I="Tributes from friends who shared in her journey.",textFeature5Text2:L="Special locations filled with meaning and memories.",textFeature4Title:U="Beloved places",textFeature5Title:V="Enduring friendships",textFeature5Visibility:C=!0,textFeature4Visibility:P=!0,textFeature3Visibility:$=!0,textFeature2Visibility:z=!0,textFeature1Visibility:B=!0,textFeature1Link:H={href:"#"},textFeature2Link:D={href:"#"},textFeature3Link:G={href:"#"},textFeature4Link:J={href:"#"},textFeature5Link:O={href:"#"},smallFeature1Visibility:q=!0,smallFeature1Link:Q={href:"#"},smallFeature2Visibility:W=!0,smallFeature2Link:X={href:"#"},featuredImage:Y="https://cdn.prod.website-files.com/69219eaa23d0fd8b7effe1fe/69219fe39e116830f4ca38d9_87bfb04f-a3b7-4de1-ad39-af9ae421637f.avif",smallFeature2AltText:ie="image of timeline with historic transit milestones",smallFeature1AltText:re="[background image] image of bakery's history wall",featuredAltText:oe="birthday party celebration"}){return a.jsx(o,{className:"section",tag:"section",children:a.jsxs(i,{className:"container",tag:"div",children:[a.jsx(i,{className:"footer-statment",tag:"div",children:a.jsx(d,{className:"heading_h2 max-width_large text-color-dark-green",tag:"h2",children:"Stories that celebrate a beautiful life"})}),a.jsxs(ee,{className:"grid_4-col tablet-1-col-1 gap-medium",children:[a.jsxs(c,{className:"content-block-link w-node-b84620cd-ea0e-d376-493f-57a1cd918680-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f05928193-0592818f",button:!1,block:"inline",options:{href:"#"},children:[a.jsx(i,{className:"image-ratio_1x1 margin-bottom_xsmall w-node-b84620cd-ea0e-d376-493f-57a1cd918681-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f05928195-0592818f",tag:"div",children:a.jsx(A,{className:"image_cover",width:"600",height:"600",loading:"lazy","data-aisg-image-id":"33540502-00bc-42b0-a72a-f16adffae416",src:Y})}),a.jsx(i,{className:"tag_group margin-bottom_xsmall",tag:"div",children:a.jsx(i,{className:"tag is-green",tag:"div",children:f})}),a.jsx(d,{className:"heading_h2",tag:k,children:N}),a.jsx(m,{className:"paragraph_small",children:_})]}),a.jsxs(i,{className:"flex_vertical gap-small w-node-b84620cd-ea0e-d376-493f-57a1cd91868a-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f0592819f-0592818f",tag:"div",children:[q?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:Q,children:[a.jsx(i,{className:"image-ratio_3x2 margin-bottom_xsmall ratio_1x1_mobile-l w-node-b84620cd-ea0e-d376-493f-57a1cd91868c-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f059281a2-0592818f",tag:"div",children:a.jsx(A,{className:"image_cover",width:"276",height:"184",loading:"lazy","data-aisg-image-id":"cfe7c69a-449b-4da5-8d20-9f7f5a3ab1fc",src:y})}),a.jsx(i,{className:"tag_group margin-bottom_xsmall",tag:"div",children:a.jsx(i,{className:"tag is-green",tag:"div",children:u})}),a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:s,children:j}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:x})]}):null,W?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:X,children:[a.jsx(i,{className:"image-ratio_3x2 margin-bottom_xsmall ratio_1x1_mobile-l w-node-b84620cd-ea0e-d376-493f-57a1cd918696-cd91867a",id:"w-node-f5da638d-a9e1-b7e6-f734-2f967c4690fd-0592818f",tag:"div",children:a.jsx(A,{className:"image_cover",width:"276",height:"184",loading:"lazy","data-aisg-image-id":"5ef766dc-bcd6-4a9d-9ae3-5efd74adaccd",src:p})}),a.jsx(i,{className:"tag_group margin-bottom_xsmall",tag:"div",children:a.jsx(i,{className:"tag is-green",tag:"div",children:b})}),a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:n,children:r}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:l})]}):null]}),a.jsxs(i,{className:"flex_vertical gap-small w-node-b84620cd-ea0e-d376-493f-57a1cd91869f-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f059281b8-0592818f",tag:"div",children:[B?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:H,children:[a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:S,children:v}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:g}),a.jsx(i,{className:"divider",tag:"div"})]}):null,z?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:D,children:[a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:e,children:t}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:h}),a.jsx(i,{className:"divider",tag:"div"})]}):null,$?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:G,children:[a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:K,children:T}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:R}),a.jsx(i,{className:"divider",tag:"div"})]}):null,P?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:J,children:[a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:E,children:U}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:L}),a.jsx(i,{className:"divider",tag:"div"})]}):null,C?a.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:O,children:[a.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:M,children:V}),a.jsx(m,{className:"paragraph_small margin-bottom_none",children:I}),a.jsx(i,{className:"divider",tag:"div"})]}):null]})]})]})})}function ce(){const[o,N]=F.useState([]),[k,_]=F.useState(!0),[f,u]=F.useState(null);F.useEffect(()=>{console.log("[StoriesSection] Component mounted, fetching memories..."),j()},[]);const j=async()=>{try{console.log("[StoriesSection] Fetching from:",`${w}/api/memories`);const e=await fetch(`${w}/api/memories`);if(console.log("[StoriesSection] Response status:",e.status),e.ok){const t=await e.json();console.log("[StoriesSection] Fetched memories:",t?.length||0,"items"),t&&Array.isArray(t)&&t.length>0&&t.forEach((h,T)=>{console.log(`[StoriesSection] Memory ${T}:`,{id:h.id,headline:h.headline,hasMediaKey:!!h.mediaKey,mediaKey:h.mediaKey,mediaType:h.mediaType})}),N(Array.isArray(t)?t:[])}else{const t=await e.text();console.error("[StoriesSection] Error response:",t),u(`Failed to load memories: ${e.status}`)}}catch(e){console.error("[StoriesSection] Error fetching memories:",e),u("Failed to load memories")}finally{_(!1)}},s=(e,t)=>e?e.length<=t?e:e.substring(0,t)+"...":"",x=e=>{if(!e.mediaKey){console.log("[StoriesSection] No mediaKey for memory:",e.id);return}const t=`${w}/api/media/${e.mediaKey}`;return console.log("[StoriesSection] Constructed media URL:",t),t},b=e=>{if(!(!e||!Array.isArray(e)||e.length===0))return e[0]};if(f)return console.error("[StoriesSection] Rendering error state:",f),a.jsxs("div",{style:{padding:"4rem 2rem",textAlign:"center",fontFamily:"var(--body-font)",color:"var(--destructive)",backgroundColor:"var(--background)"},children:[a.jsx("p",{children:f}),a.jsx("button",{onClick:()=>{u(null),_(!0),j()},style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"var(--primary)",color:"var(--primary-foreground)",border:"none",borderRadius:"var(--radius)",cursor:"pointer"},children:"Retry"})]});if(k)return console.log("[StoriesSection] Rendering loading state"),a.jsx("div",{style:{padding:"4rem 2rem",textAlign:"center",fontFamily:"var(--body-font)",color:"var(--foreground)",backgroundColor:"var(--background)"},children:"Loading stories..."});if(!o||o.length===0)return console.log("[StoriesSection] No memories found, not rendering Stories component"),null;console.log("[StoriesSection] Rendering Stories component with",o.length,"memories");const r=o[0],n=o[1],l=o[2],p=o[3],y=o[4],S=o[5],v=o[6],g=o[7];try{const e={};if(r)if(e.featuredFeaturedTitle=r.headline||"",e.featuredText=s(r.memory||"",150),e.featuredTagText=b(r.tags),console.log("[StoriesSection] Featured memory check:",{hasMediaKey:!!r.mediaKey,mediaKey:r.mediaKey,mediaType:r.mediaType,isPhoto:r.mediaType==="photo"}),r.mediaKey&&r.mediaType==="photo"){const t=x(r);console.log("[StoriesSection] Setting featured image URL:",t),t&&(e.featuredImage=t,e.featuredAltText=r.headline||"Featured memory")}else console.log("[StoriesSection] Featured memory has no photo - skipping image");if(n){if(e.smallFeature1Title=n.headline||"",e.smallFeature1BodyText=s(n.memory||"",100),e.smallFeature1TagText=b(n.tags),n.mediaKey&&n.mediaType==="photo"){const t=x(n);console.log("[StoriesSection] Setting smallFeature1 image URL:",t),t&&(e.smallFeature1Image=t,e.smallFeature1AltText=n.headline||"Memory")}}else e.smallFeature1Visibility={hidden:!0};if(l){if(e.smallFeature2Title=l.headline||"",e.smallFeature2Text=s(l.memory||"",100),e.smallFeature2TagText=b(l.tags),l.mediaKey&&l.mediaType==="photo"){const t=x(l);console.log("[StoriesSection] Setting smallFeature2 image URL:",t),t&&(e.smallFeature2Image=t,e.smallFeature2AltText=l.headline||"Memory")}}else e.smallFeature2Visibility={hidden:!0};return p?(e.textFeature1Title=p.headline||"",e.textFeature1Text=s(p.memory||"",80)):e.textFeature1Visibility={hidden:!0},y?(e.textFeature2Title=y.headline||"",e.textFeature2Text=s(y.memory||"",80)):e.textFeature2Visibility={hidden:!0},S?(e.textFeature3Title=S.headline||"",e.textFeature3Text=s(S.memory||"",80)):e.textFeature3Visibility={hidden:!0},v?e.textFeature4Title=v.headline||"":e.textFeature4Visibility={hidden:!0},g?(e.textFeature5Title=g.headline||"",e.textFeature5Text=s(g.memory||"",80),e.textFeature5Text2=s(g.memory||"",80)):e.textFeature5Visibility={hidden:!0},console.log("[StoriesSection] Final props keys:",Object.keys(e)),console.log("[StoriesSection] Has featuredImage:",!!e.featuredImage),console.log("[StoriesSection] featuredImage value:",e.featuredImage),a.jsx(ae,{children:a.jsx(te,{...e})})}catch(e){return console.error("[StoriesSection] Error rendering Stories:",e),console.error("[StoriesSection] Error stack:",e instanceof Error?e.stack:"No stack"),null}}export{ce as StoriesSection};
