import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as F}from"./index.0yr9KlQE.js";import{b as T}from"./base-url.DVjYrgnb.js";import{S as Z,B as t,a as d,G as ee,L as c,I as k,P as m,D as ae}from"./BackgroundVideo.Djk_rsrv.js";function te({as:o=Z,featuredFeaturedTitle:N="The heart of her family",featuredFeaturedTitleTag:S="h3",featuredText:_="Memories and photos honoring her love and devotion to those closest to her.",featuredTagText:g="Family",smallFeature1TagText:f="Traditions",smallFeature1Title:v="Recipes and cherished rituals",smallFeature1TitleTag:n="h3",smallFeature1BodyText:u="Favorite dishes, holiday moments, and the warmth she brought to every table.",smallFeature2TagText:x="Travel",smallFeature2Title:r="Journeys and new horizons",smallFeature2TitleTag:s="h3",smallFeature2Text:l="Photos and stories from adventures that sparked her joy and curiosity.",smallFeature2Image:p="https://cdn.prod.website-files.com/69219eaa23d0fd8b7effe1fe/69219fe3ace6d8206cfc4d8f_de1ab5b8-1007-400f-9ae2-1c7a75738f98.avif",smallFeature1Image:b="https://cdn.prod.website-files.com/69219eaa23d0fd8b7effe1fe/69219fe3b36d2cab360906cb_627e067d-8a03-4693-8344-eff8407c4a73.avif",textFeature1TagText:y="h3",textFeature1Title:j="Kindness remembered",textFeature1Text:h="Moments when her caring spirit made a difference for others.",textFeature2TagText:a="h3",textFeature2Title:i="A lifelong learner",textFeature2Text:w="How her curiosity and wisdom inspired everyone she met.",textFeature3Title:K="Laughter shared",textFeature3TitleTag:A="h3",textFeature3Text:E="Stories that capture her humor and the light she brought to every day.",textFeature4Tag:R="h3",textFeature5Tag:C="h3",textFeature5Text:V="Tributes from friends who shared in her journey.",textFeature5Text2:I="Special locations filled with meaning and memories.",textFeature4Title:L="Beloved places",textFeature5Title:z="Enduring friendships",textFeature5Visibility:B=!0,textFeature4Visibility:M=!0,textFeature3Visibility:P=!0,textFeature2Visibility:$=!0,textFeature1Visibility:U=!0,textFeature1Link:D={href:"#"},textFeature2Link:G={href:"#"},textFeature3Link:H={href:"#"},textFeature4Link:J={href:"#"},textFeature5Link:q={href:"#"},smallFeature1Visibility:O=!0,smallFeature1Link:Q={href:"#"},smallFeature2Visibility:W=!0,smallFeature2Link:X={href:"#"},featuredImage:Y="https://cdn.prod.website-files.com/69219eaa23d0fd8b7effe1fe/69219fe39e116830f4ca38d9_87bfb04f-a3b7-4de1-ad39-af9ae421637f.avif",smallFeature2AltText:re="image of timeline with historic transit milestones",smallFeature1AltText:ie="[background image] image of bakery's history wall",featuredAltText:oe="birthday party celebration"}){return e.jsx(o,{className:"section",tag:"section",children:e.jsxs(t,{className:"container",tag:"div",children:[e.jsx(t,{className:"footer-statment",tag:"div",children:e.jsx(d,{className:"heading_h2 max-width_large text-color-dark-green",tag:"h2",children:"Stories that celebrate a beautiful life"})}),e.jsxs(ee,{className:"grid_4-col tablet-1-col-1 gap-medium",children:[e.jsxs(c,{className:"content-block-link w-node-b84620cd-ea0e-d376-493f-57a1cd918680-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f05928193-0592818f",button:!1,block:"inline",options:{href:"#"},children:[e.jsx(t,{className:"image-ratio_1x1 margin-bottom_xsmall w-node-b84620cd-ea0e-d376-493f-57a1cd918681-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f05928195-0592818f",tag:"div",children:e.jsx(k,{className:"image_cover",width:"600",height:"600",loading:"lazy","data-aisg-image-id":"33540502-00bc-42b0-a72a-f16adffae416",src:Y})}),e.jsx(t,{className:"tag_group margin-bottom_xsmall",tag:"div",children:e.jsx(t,{className:"tag is-green",tag:"div",children:g})}),e.jsx(d,{className:"heading_h2",tag:S,children:N}),e.jsx(m,{className:"paragraph_small",children:_})]}),e.jsxs(t,{className:"flex_vertical gap-small w-node-b84620cd-ea0e-d376-493f-57a1cd91868a-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f0592819f-0592818f",tag:"div",children:[O?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:Q,children:[e.jsx(t,{className:"image-ratio_3x2 margin-bottom_xsmall ratio_1x1_mobile-l w-node-b84620cd-ea0e-d376-493f-57a1cd91868c-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f059281a2-0592818f",tag:"div",children:e.jsx(k,{className:"image_cover",width:"276",height:"184",loading:"lazy","data-aisg-image-id":"cfe7c69a-449b-4da5-8d20-9f7f5a3ab1fc",src:b})}),e.jsx(t,{className:"tag_group margin-bottom_xsmall",tag:"div",children:e.jsx(t,{className:"tag is-green",tag:"div",children:f})}),e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:n,children:v}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:u})]}):null,W?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:X,children:[e.jsx(t,{className:"image-ratio_3x2 margin-bottom_xsmall ratio_1x1_mobile-l w-node-b84620cd-ea0e-d376-493f-57a1cd918696-cd91867a",id:"w-node-f5da638d-a9e1-b7e6-f734-2f967c4690fd-0592818f",tag:"div",children:e.jsx(k,{className:"image_cover",width:"276",height:"184",loading:"lazy","data-aisg-image-id":"5ef766dc-bcd6-4a9d-9ae3-5efd74adaccd",src:p})}),e.jsx(t,{className:"tag_group margin-bottom_xsmall",tag:"div",children:e.jsx(t,{className:"tag is-green",tag:"div",children:x})}),e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:s,children:r}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:l})]}):null]}),e.jsxs(t,{className:"flex_vertical gap-small w-node-b84620cd-ea0e-d376-493f-57a1cd91869f-cd91867a",id:"w-node-_7c7fb997-9efe-3ef4-c59d-830f059281b8-0592818f",tag:"div",children:[U?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:D,children:[e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:y,children:j}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:h}),e.jsx(t,{className:"divider",tag:"div"})]}):null,$?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:G,children:[e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:a,children:i}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:w}),e.jsx(t,{className:"divider",tag:"div"})]}):null,P?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:H,children:[e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:A,children:K}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:E}),e.jsx(t,{className:"divider",tag:"div"})]}):null,M?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:J,children:[e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:R,children:L}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:I}),e.jsx(t,{className:"divider",tag:"div"})]}):null,B?e.jsxs(c,{className:"content-block-link",button:!1,block:"inline",options:q,children:[e.jsx(d,{className:"heading_h4 margin-bottom_xxsmall",tag:C,children:z}),e.jsx(m,{className:"paragraph_small margin-bottom_none",children:V}),e.jsx(t,{className:"divider",tag:"div"})]}):null]})]})]})})}function ce(){const[o,N]=F.useState([]),[S,_]=F.useState(!0),[g,f]=F.useState(null);F.useEffect(()=>{console.log("[StoriesSection] Component mounted, fetching memories..."),v()},[]);const v=async()=>{try{console.log("[StoriesSection] Fetching from:",`${T}/api/memories`);const a=await fetch(`${T}/api/memories`);if(console.log("[StoriesSection] Response status:",a.status),a.ok){const i=await a.json();console.log("[StoriesSection] Fetched memories:",i),console.log("[StoriesSection] First memory mediaKey:",i[0]?.mediaKey),console.log("[StoriesSection] First memory mediaType:",i[0]?.mediaType),N(i)}else{const i=await a.text();console.error("[StoriesSection] Error response:",i),f(`Failed to load memories: ${a.status}`)}}catch(a){console.error("[StoriesSection] Error fetching memories:",a),f("Failed to load memories")}finally{_(!1)}},n=(a,i)=>a.length<=i?a:a.substring(0,i)+"...",u=a=>{if(!a.mediaKey){console.log("[StoriesSection] No mediaKey for memory:",a.id);return}const i=`${T}/api/media/${a.mediaKey}`;return console.log("[StoriesSection] Constructed media URL:",i),i},x=a=>{if(a)return a.split(",")[0].trim()};if(g)return console.error("[StoriesSection] Rendering error state:",g),e.jsxs("div",{style:{padding:"4rem 2rem",textAlign:"center",fontFamily:"var(--_apps---typography--body-font)",color:"var(--_apps---colors--destructive)",backgroundColor:"var(--_apps---colors--background)"},children:[e.jsx("p",{children:g}),e.jsx("button",{onClick:()=>{f(null),_(!0),v()},style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"var(--_apps---colors--primary)",color:"var(--_apps---colors--primary-foreground)",border:"none",borderRadius:"var(--_apps---sizes--radius)",cursor:"pointer"},children:"Retry"})]});if(S)return console.log("[StoriesSection] Rendering loading state"),e.jsx("div",{style:{padding:"4rem 2rem",textAlign:"center",fontFamily:"var(--_apps---typography--body-font)",color:"var(--_apps---colors--foreground)",backgroundColor:"var(--_apps---colors--background)"},children:"Loading stories..."});if(o.length===0)return console.log("[StoriesSection] No memories found"),e.jsx("div",{style:{padding:"4rem 2rem",textAlign:"center",fontFamily:"var(--_apps---typography--body-font)",color:"var(--_apps---colors--foreground)",backgroundColor:"var(--_apps---colors--background)"},children:"No stories yet. Be the first to share a memory!"});console.log("[StoriesSection] Rendering Stories component with",o.length,"memories");const r=o[0],s=o[1],l=o[2],p=o[3],b=o[4],y=o[5],j=o[6],h=o[7];console.log("[StoriesSection] Featured memory:",{id:r?.id,headline:r?.headline,mediaKey:r?.mediaKey,mediaType:r?.mediaType,willShowImage:!!(r?.mediaKey&&r?.mediaType==="photo")});try{return e.jsx(ae,{children:e.jsx(te,{featuredFeaturedTitle:r?.headline,featuredText:n(r?.memory||"",150),featuredTagText:x(r?.tags),featuredImage:r?.mediaKey&&r?.mediaType==="photo"?{src:u(r),alt:r.headline}:void 0,featuredAltText:r?.headline,smallFeature1Title:s?.headline,smallFeature1BodyText:n(s?.memory||"",100),smallFeature1TagText:x(s?.tags),smallFeature1Image:s?.mediaKey&&s?.mediaType==="photo"?{src:u(s),alt:s.headline}:void 0,smallFeature1AltText:s?.headline,smallFeature1Visibility:s?void 0:{hidden:!0},smallFeature2Title:l?.headline,smallFeature2Text:n(l?.memory||"",100),smallFeature2TagText:x(l?.tags),smallFeature2Image:l?.mediaKey&&l?.mediaType==="photo"?{src:u(l),alt:l.headline}:void 0,smallFeature2AltText:l?.headline,smallFeature2Visibility:l?void 0:{hidden:!0},textFeature1Title:p?.headline,textFeature1Text:n(p?.memory||"",80),textFeature1Visibility:p?void 0:{hidden:!0},textFeature2Title:b?.headline,textFeature2Text:n(b?.memory||"",80),textFeature2Visibility:b?void 0:{hidden:!0},textFeature3Title:y?.headline,textFeature3Text:n(y?.memory||"",80),textFeature3Visibility:y?void 0:{hidden:!0},textFeature4Title:j?.headline,textFeature4Visibility:j?void 0:{hidden:!0},textFeature5Title:h?.headline,textFeature5Text:n(h?.memory||"",80),textFeature5Text2:n(h?.memory||"",80),textFeature5Visibility:h?void 0:{hidden:!0}})})}catch(a){return console.error("[StoriesSection] Error rendering Stories:",a),e.jsx("div",{style:{padding:"4rem 2rem",textAlign:"center",fontFamily:"var(--_apps---typography--body-font)",color:"var(--_apps---colors--destructive)",backgroundColor:"var(--_apps---colors--background)"},children:"Error displaying stories. Please check console for details."})}}export{ce as StoriesSection};
