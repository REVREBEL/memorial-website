import{j as b}from"./jsx-runtime.D_zvdyIk.js";import{r as H}from"./index.0yr9KlQE.js";import{m as Pe,u as We,e as pt,f as kt,c as Mt,g as ot,P as Me,h as De,i as dn,k as fn,R as un,a as hn,l as mn,F as pn,D as gn,s as vn,n as $e,j as xn,b as yn,C as bn,L as me,I as Ue,B as Ae,T as wn,o as An,q as Nn,t as Cn,H as gt}from"./heart.fHTai3-V.js";import{b as we}from"./base-url.DVjYrgnb.js";import"./index.ViApDAiE.js";/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vt=Pe("circle-alert",jn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],xt=Pe("loader-circle",kn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],En=Pe("play",Mn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fn=Pe("plus",_n);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],yt=Pe("share-2",Sn);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bt=Pe("upload",In);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],it=Pe("x",Un);function Rn(p,v){return H.useReducer((C,a)=>v[C][a]??C,p)}var Be=p=>{const{present:v,children:C}=p,a=Dn(v),e=typeof C=="function"?C({present:a.isPresent}):H.Children.only(C),t=We(a.ref,Tn(e));return typeof C=="function"||a.isPresent?H.cloneElement(e,{ref:t}):null};Be.displayName="Presence";function Dn(p){const[v,C]=H.useState(),a=H.useRef(null),e=H.useRef(p),t=H.useRef("none"),d=p?"mounted":"unmounted",[i,m]=Rn(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return H.useEffect(()=>{const x=Ke(a.current);t.current=i==="mounted"?x:"none"},[i]),pt(()=>{const x=a.current,r=e.current;if(r!==p){const n=t.current,c=Ke(x);p?m("MOUNT"):c==="none"||x?.display==="none"?m("UNMOUNT"):m(r&&n!==c?"ANIMATION_OUT":"UNMOUNT"),e.current=p}},[p,m]),pt(()=>{if(v){let x;const r=v.ownerDocument.defaultView??window,o=c=>{const _=Ke(a.current).includes(c.animationName);if(c.target===v&&_&&(m("ANIMATION_END"),!e.current)){const R=v.style.animationFillMode;v.style.animationFillMode="forwards",x=r.setTimeout(()=>{v.style.animationFillMode==="forwards"&&(v.style.animationFillMode=R)})}},n=c=>{c.target===v&&(t.current=Ke(a.current))};return v.addEventListener("animationstart",n),v.addEventListener("animationcancel",o),v.addEventListener("animationend",o),()=>{r.clearTimeout(x),v.removeEventListener("animationstart",n),v.removeEventListener("animationcancel",o),v.removeEventListener("animationend",o)}}else m("ANIMATION_END")},[v,m]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:H.useCallback(x=>{a.current=x?getComputedStyle(x):null,C(x)},[])}}function Ke(p){return p?.animationName||"none"}function Tn(p){let v=Object.getOwnPropertyDescriptor(p.props,"ref")?.get,C=v&&"isReactWarning"in v&&v.isReactWarning;return C?p.ref:(v=Object.getOwnPropertyDescriptor(p,"ref")?.get,C=v&&"isReactWarning"in v&&v.isReactWarning,C?p.props.ref:p.props.ref||p.ref)}var Je="Dialog",[Et,Nr]=Mt(Je),[Pn,ge]=Et(Je),_t=p=>{const{__scopeDialog:v,children:C,open:a,defaultOpen:e,onOpenChange:t,modal:d=!0}=p,i=H.useRef(null),m=H.useRef(null),[x,r]=kt({prop:a,defaultProp:e??!1,onChange:t,caller:Je});return b.jsx(Pn,{scope:v,triggerRef:i,contentRef:m,contentId:ot(),titleId:ot(),descriptionId:ot(),open:x,onOpenChange:r,onOpenToggle:H.useCallback(()=>r(o=>!o),[r]),modal:d,children:C})};_t.displayName=Je;var Ft="DialogTrigger",On=H.forwardRef((p,v)=>{const{__scopeDialog:C,...a}=p,e=ge(Ft,C),t=We(v,e.triggerRef);return b.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":e.open,"aria-controls":e.contentId,"data-state":ct(e.open),...a,ref:t,onClick:De(p.onClick,e.onOpenToggle)})});On.displayName=Ft;var st="DialogPortal",[Ln,St]=Et(st,{forceMount:void 0}),It=p=>{const{__scopeDialog:v,forceMount:C,children:a,container:e}=p,t=ge(st,v);return b.jsx(Ln,{scope:v,forceMount:C,children:H.Children.map(a,d=>b.jsx(Be,{present:C||t.open,children:b.jsx(dn,{asChild:!0,container:e,children:d})}))})};It.displayName=st;var Ge="DialogOverlay",Ut=H.forwardRef((p,v)=>{const C=St(Ge,p.__scopeDialog),{forceMount:a=C.forceMount,...e}=p,t=ge(Ge,p.__scopeDialog);return t.modal?b.jsx(Be,{present:a||t.open,children:b.jsx(zn,{...e,ref:v})}):null});Ut.displayName=Ge;var Wn=hn("DialogOverlay.RemoveScroll"),zn=H.forwardRef((p,v)=>{const{__scopeDialog:C,...a}=p,e=ge(Ge,C);return b.jsx(un,{as:Wn,allowPinchZoom:!0,shards:[e.contentRef],children:b.jsx(Me.div,{"data-state":ct(e.open),...a,ref:v,style:{pointerEvents:"auto",...a.style}})})}),Te="DialogContent",Rt=H.forwardRef((p,v)=>{const C=St(Te,p.__scopeDialog),{forceMount:a=C.forceMount,...e}=p,t=ge(Te,p.__scopeDialog);return b.jsx(Be,{present:a||t.open,children:t.modal?b.jsx(Hn,{...e,ref:v}):b.jsx($n,{...e,ref:v})})});Rt.displayName=Te;var Hn=H.forwardRef((p,v)=>{const C=ge(Te,p.__scopeDialog),a=H.useRef(null),e=We(v,C.contentRef,a);return H.useEffect(()=>{const t=a.current;if(t)return fn(t)},[]),b.jsx(Dt,{...p,ref:e,trapFocus:C.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:De(p.onCloseAutoFocus,t=>{t.preventDefault(),C.triggerRef.current?.focus()}),onPointerDownOutside:De(p.onPointerDownOutside,t=>{const d=t.detail.originalEvent,i=d.button===0&&d.ctrlKey===!0;(d.button===2||i)&&t.preventDefault()}),onFocusOutside:De(p.onFocusOutside,t=>t.preventDefault())})}),$n=H.forwardRef((p,v)=>{const C=ge(Te,p.__scopeDialog),a=H.useRef(!1),e=H.useRef(!1);return b.jsx(Dt,{...p,ref:v,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{p.onCloseAutoFocus?.(t),t.defaultPrevented||(a.current||C.triggerRef.current?.focus(),t.preventDefault()),a.current=!1,e.current=!1},onInteractOutside:t=>{p.onInteractOutside?.(t),t.defaultPrevented||(a.current=!0,t.detail.originalEvent.type==="pointerdown"&&(e.current=!0));const d=t.target;C.triggerRef.current?.contains(d)&&t.preventDefault(),t.detail.originalEvent.type==="focusin"&&e.current&&t.preventDefault()}})}),Dt=H.forwardRef((p,v)=>{const{__scopeDialog:C,trapFocus:a,onOpenAutoFocus:e,onCloseAutoFocus:t,...d}=p,i=ge(Te,C),m=H.useRef(null),x=We(v,m);return mn(),b.jsxs(b.Fragment,{children:[b.jsx(pn,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:e,onUnmountAutoFocus:t,children:b.jsx(gn,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ct(i.open),...d,ref:x,onDismiss:()=>i.onOpenChange(!1)})}),b.jsxs(b.Fragment,{children:[b.jsx(qn,{titleId:i.titleId}),b.jsx(Qn,{contentRef:m,descriptionId:i.descriptionId})]})]})}),lt="DialogTitle",Tt=H.forwardRef((p,v)=>{const{__scopeDialog:C,...a}=p,e=ge(lt,C);return b.jsx(Me.h2,{id:e.titleId,...a,ref:v})});Tt.displayName=lt;var Pt="DialogDescription",Bn=H.forwardRef((p,v)=>{const{__scopeDialog:C,...a}=p,e=ge(Pt,C);return b.jsx(Me.p,{id:e.descriptionId,...a,ref:v})});Bn.displayName=Pt;var Ot="DialogClose",Lt=H.forwardRef((p,v)=>{const{__scopeDialog:C,...a}=p,e=ge(Ot,C);return b.jsx(Me.button,{type:"button",...a,ref:v,onClick:De(p.onClick,()=>e.onOpenChange(!1))})});Lt.displayName=Ot;function ct(p){return p?"open":"closed"}var Wt="DialogTitleWarning",[Cr,zt]=vn(Wt,{contentName:Te,titleName:lt,docsSlug:"dialog"}),qn=({titleId:p})=>{const v=zt(Wt),C=`\`${v.contentName}\` requires a \`${v.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${v.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${v.docsSlug}`;return H.useEffect(()=>{p&&(document.getElementById(p)||console.error(C))},[C,p]),null},Kn="DialogDescriptionWarning",Qn=({contentRef:p,descriptionId:v})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zt(Kn).contentName}}.`;return H.useEffect(()=>{const e=p.current?.getAttribute("aria-describedby");v&&e&&(document.getElementById(v)||console.warn(a))},[a,p,v]),null},Gn=_t,Vn=It,Zn=Ut,Xn=Rt,Yn=Tt,Jn=Lt;function wt({...p}){return b.jsx(Gn,{"data-slot":"dialog",...p})}function er({...p}){return b.jsx(Vn,{"data-slot":"dialog-portal",...p})}function tr({className:p,...v}){return b.jsx(Zn,{"data-slot":"dialog-overlay",className:$e("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",p),...v})}function At({className:p,children:v,showCloseButton:C=!0,...a}){return b.jsxs(er,{"data-slot":"dialog-portal",children:[b.jsx(tr,{}),b.jsxs(Xn,{"data-slot":"dialog-content",className:$e("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",p),...a,children:[v,C&&b.jsxs(Jn,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[b.jsx(it,{}),b.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Nt({className:p,...v}){return b.jsx("div",{"data-slot":"dialog-header",className:$e("flex flex-col gap-2 text-center sm:text-left",p),...v})}function Ct({className:p,...v}){return b.jsx(Yn,{"data-slot":"dialog-title",className:$e("text-lg leading-none font-semibold",p),...v})}var et="Checkbox",[nr,jr]=Mt(et),[rr,dt]=nr(et);function or(p){const{__scopeCheckbox:v,checked:C,children:a,defaultChecked:e,disabled:t,form:d,name:i,onCheckedChange:m,required:x,value:r="on",internal_do_not_use_render:o}=p,[n,c]=kt({prop:C,defaultProp:e??!1,onChange:m,caller:et}),[h,_]=H.useState(null),[R,y]=H.useState(null),M=H.useRef(!1),F=h?!!d||!!h.closest("form"):!0,w={checked:n,disabled:t,setChecked:c,control:h,setControl:_,name:i,form:d,value:r,hasConsumerStoppedPropagationRef:M,required:x,defaultChecked:ke(e)?!1:e,isFormControl:F,bubbleInput:R,setBubbleInput:y};return b.jsx(rr,{scope:v,...w,children:ar(o)?o(w):a})}var Ht="CheckboxTrigger",$t=H.forwardRef(({__scopeCheckbox:p,onKeyDown:v,onClick:C,...a},e)=>{const{control:t,value:d,disabled:i,checked:m,required:x,setControl:r,setChecked:o,hasConsumerStoppedPropagationRef:n,isFormControl:c,bubbleInput:h}=dt(Ht,p),_=We(e,r),R=H.useRef(m);return H.useEffect(()=>{const y=t?.form;if(y){const M=()=>o(R.current);return y.addEventListener("reset",M),()=>y.removeEventListener("reset",M)}},[t,o]),b.jsx(Me.button,{type:"button",role:"checkbox","aria-checked":ke(m)?"mixed":m,"aria-required":x,"data-state":Vt(m),"data-disabled":i?"":void 0,disabled:i,value:d,...a,ref:_,onKeyDown:De(v,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:De(C,y=>{o(M=>ke(M)?!0:!M),h&&c&&(n.current=y.isPropagationStopped(),n.current||y.stopPropagation())})})});$t.displayName=Ht;var Bt=H.forwardRef((p,v)=>{const{__scopeCheckbox:C,name:a,checked:e,defaultChecked:t,required:d,disabled:i,value:m,onCheckedChange:x,form:r,...o}=p;return b.jsx(or,{__scopeCheckbox:C,checked:e,defaultChecked:t,disabled:i,required:d,onCheckedChange:x,name:a,form:r,value:m,internal_do_not_use_render:({isFormControl:n})=>b.jsxs(b.Fragment,{children:[b.jsx($t,{...o,ref:v,__scopeCheckbox:C}),n&&b.jsx(Gt,{__scopeCheckbox:C})]})})});Bt.displayName=et;var qt="CheckboxIndicator",Kt=H.forwardRef((p,v)=>{const{__scopeCheckbox:C,forceMount:a,...e}=p,t=dt(qt,C);return b.jsx(Be,{present:a||ke(t.checked)||t.checked===!0,children:b.jsx(Me.span,{"data-state":Vt(t.checked),"data-disabled":t.disabled?"":void 0,...e,ref:v,style:{pointerEvents:"none",...p.style}})})});Kt.displayName=qt;var Qt="CheckboxBubbleInput",Gt=H.forwardRef(({__scopeCheckbox:p,...v},C)=>{const{control:a,hasConsumerStoppedPropagationRef:e,checked:t,defaultChecked:d,required:i,disabled:m,name:x,value:r,form:o,bubbleInput:n,setBubbleInput:c}=dt(Qt,p),h=We(C,c),_=xn(t),R=yn(a);H.useEffect(()=>{const M=n;if(!M)return;const F=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(F,"checked").set,g=!e.current;if(_!==t&&I){const D=new Event("click",{bubbles:g});M.indeterminate=ke(t),I.call(M,ke(t)?!1:t),M.dispatchEvent(D)}},[n,_,t,e]);const y=H.useRef(ke(t)?!1:t);return b.jsx(Me.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??y.current,required:i,disabled:m,name:x,value:r,form:o,...v,tabIndex:-1,ref:h,style:{...v.style,...R,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Gt.displayName=Qt;function ar(p){return typeof p=="function"}function ke(p){return p==="indeterminate"}function Vt(p){return ke(p)?"indeterminate":p?"checked":"unchecked"}function ir({className:p,...v}){return b.jsx(Bt,{"data-slot":"checkbox",className:$e("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",p),...v,children:b.jsx(Kt,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:b.jsx(bn,{className:"size-3.5"})})})}function sr(p,v){return v.forEach(function(C){C&&typeof C!="string"&&!Array.isArray(C)&&Object.keys(C).forEach(function(a){if(a!=="default"&&!(a in p)){var e=Object.getOwnPropertyDescriptor(C,a);Object.defineProperty(p,a,e.get?e:{enumerable:!0,get:function(){return C[a]}})}})}),Object.freeze(p)}function Zt(p,v){return new Promise(function(C,a){let e;return lr(p).then(function(t){try{return e=t,C(new Blob([v.slice(0,2),e,v.slice(2)],{type:"image/jpeg"}))}catch(d){return a(d)}},a)})}const lr=p=>new Promise((v,C)=>{const a=new FileReader;a.addEventListener("load",({target:{result:e}})=>{const t=new DataView(e);let d=0;if(t.getUint16(d)!==65496)return C("not a valid JPEG");for(d+=2;;){const i=t.getUint16(d);if(i===65498)break;const m=t.getUint16(d+2);if(i===65505&&t.getUint32(d+4)===1165519206){const x=d+10;let r;switch(t.getUint16(x)){case 18761:r=!0;break;case 19789:r=!1;break;default:return C("TIFF header contains invalid endian")}if(t.getUint16(x+2,r)!==42)return C("TIFF header contains invalid version");const o=t.getUint32(x+4,r),n=x+o+2+12*t.getUint16(x+o,r);for(let c=x+o+2;c<n;c+=12)if(t.getUint16(c,r)==274){if(t.getUint16(c+2,r)!==3)return C("Orientation data type is invalid");if(t.getUint32(c+4,r)!==1)return C("Orientation data count is invalid");t.setUint16(c+8,1,r);break}return v(e.slice(d,d+2+m))}d+=2+m}return v(new Blob)}),a.readAsArrayBuffer(p)});var Ve={},cr={get exports(){return Ve},set exports(p){Ve=p}};(function(p){var v,C,a={};cr.exports=a,a.parse=function(e,t){for(var d=a.bin.readUshort,i=a.bin.readUint,m=0,x={},r=new Uint8Array(e),o=r.length-4;i(r,o)!=101010256;)o--;m=o,m+=4;var n=d(r,m+=4);d(r,m+=2);var c=i(r,m+=2),h=i(r,m+=4);m+=4,m=h;for(var _=0;_<n;_++){i(r,m),m+=4,m+=4,m+=4,i(r,m+=4),c=i(r,m+=4);var R=i(r,m+=4),y=d(r,m+=4),M=d(r,m+2),F=d(r,m+4);m+=6;var w=i(r,m+=8);m+=4,m+=y+M+F,a._readLocal(r,w,x,c,R,t)}return x},a._readLocal=function(e,t,d,i,m,x){var r=a.bin.readUshort,o=a.bin.readUint;o(e,t),r(e,t+=4),r(e,t+=2);var n=r(e,t+=2);o(e,t+=2),o(e,t+=4),t+=4;var c=r(e,t+=8),h=r(e,t+=2);t+=2;var _=a.bin.readUTF8(e,t,c);if(t+=c,t+=h,x)d[_]={size:m,csize:i};else{var R=new Uint8Array(e.buffer,t);if(n==0)d[_]=new Uint8Array(R.buffer.slice(t,t+i));else{if(n!=8)throw"unknown compression method: "+n;var y=new Uint8Array(m);a.inflateRaw(R,y),d[_]=y}}},a.inflateRaw=function(e,t){return a.F.inflate(e,t)},a.inflate=function(e,t){return e[0],e[1],a.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),t)},a.deflate=function(e,t){t==null&&(t={level:6});var d=0,i=new Uint8Array(50+Math.floor(1.1*e.length));i[d]=120,i[d+1]=156,d+=2,d=a.F.deflateRaw(e,i,d,t.level);var m=a.adler(e,0,e.length);return i[d+0]=m>>>24&255,i[d+1]=m>>>16&255,i[d+2]=m>>>8&255,i[d+3]=m>>>0&255,new Uint8Array(i.buffer,0,d+4)},a.deflateRaw=function(e,t){t==null&&(t={level:6});var d=new Uint8Array(50+Math.floor(1.1*e.length)),i=a.F.deflateRaw(e,d,i,t.level);return new Uint8Array(d.buffer,0,i)},a.encode=function(e,t){t==null&&(t=!1);var d=0,i=a.bin.writeUint,m=a.bin.writeUshort,x={};for(var r in e){var o=!a._noNeed(r)&&!t,n=e[r],c=a.crc.crc(n,0,n.length);x[r]={cpr:o,usize:n.length,crc:c,file:o?a.deflateRaw(n):n}}for(var r in x)d+=x[r].file.length+30+46+2*a.bin.sizeUTF8(r);d+=22;var h=new Uint8Array(d),_=0,R=[];for(var r in x){var y=x[r];R.push(_),_=a._writeHeader(h,_,r,y,0)}var M=0,F=_;for(var r in x)y=x[r],R.push(_),_=a._writeHeader(h,_,r,y,1,R[M++]);var w=_-F;return i(h,_,101010256),_+=4,m(h,_+=4,M),m(h,_+=2,M),i(h,_+=2,w),i(h,_+=4,F),_+=4,_+=2,h.buffer},a._noNeed=function(e){var t=e.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(t)!=-1},a._writeHeader=function(e,t,d,i,m,x){var r=a.bin.writeUint,o=a.bin.writeUshort,n=i.file;return r(e,t,m==0?67324752:33639248),t+=4,m==1&&(t+=2),o(e,t,20),o(e,t+=2,0),o(e,t+=2,i.cpr?8:0),r(e,t+=2,0),r(e,t+=4,i.crc),r(e,t+=4,n.length),r(e,t+=4,i.usize),o(e,t+=4,a.bin.sizeUTF8(d)),o(e,t+=2,0),t+=2,m==1&&(t+=2,t+=2,r(e,t+=6,x),t+=4),t+=a.bin.writeUTF8(e,t,d),m==0&&(e.set(n,t),t+=n.length),t},a.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var d=t,i=0;i<8;i++)1&d?d=3988292384^d>>>1:d>>>=1;e[t]=d}return e}(),update:function(e,t,d,i){for(var m=0;m<i;m++)e=a.crc.table[255&(e^t[d+m])]^e>>>8;return e},crc:function(e,t,d){return 4294967295^a.crc.update(4294967295,e,t,d)}},a.adler=function(e,t,d){for(var i=1,m=0,x=t,r=t+d;x<r;){for(var o=Math.min(x+5552,r);x<o;)m+=i+=e[x++];i%=65521,m%=65521}return m<<16|i},a.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,d){e[t]=255&d,e[t+1]=d>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,d){e[t]=255&d,e[t+1]=d>>8&255,e[t+2]=d>>16&255,e[t+3]=d>>24&255},readASCII:function(e,t,d){for(var i="",m=0;m<d;m++)i+=String.fromCharCode(e[t+m]);return i},writeASCII:function(e,t,d){for(var i=0;i<d.length;i++)e[t+i]=d.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,d){for(var i,m="",x=0;x<d;x++)m+="%"+a.bin.pad(e[t+x].toString(16));try{i=decodeURIComponent(m)}catch{return a.bin.readASCII(e,t,d)}return i},writeUTF8:function(e,t,d){for(var i=d.length,m=0,x=0;x<i;x++){var r=d.charCodeAt(x);if((4294967168&r)==0)e[t+m]=r,m++;else if((4294965248&r)==0)e[t+m]=192|r>>6,e[t+m+1]=128|r>>0&63,m+=2;else if((4294901760&r)==0)e[t+m]=224|r>>12,e[t+m+1]=128|r>>6&63,e[t+m+2]=128|r>>0&63,m+=3;else{if((4292870144&r)!=0)throw"e";e[t+m]=240|r>>18,e[t+m+1]=128|r>>12&63,e[t+m+2]=128|r>>6&63,e[t+m+3]=128|r>>0&63,m+=4}}return m},sizeUTF8:function(e){for(var t=e.length,d=0,i=0;i<t;i++){var m=e.charCodeAt(i);if((4294967168&m)==0)d++;else if((4294965248&m)==0)d+=2;else if((4294901760&m)==0)d+=3;else{if((4292870144&m)!=0)throw"e";d+=4}}return d}},a.F={},a.F.deflateRaw=function(e,t,d,i){var m=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],x=a.F.U,r=a.F._goodIndex;a.F._hash;var o=a.F._putsE,n=0,c=d<<3,h=0,_=e.length;if(i==0){for(;n<_;)o(t,c,n+(E=Math.min(65535,_-n))==_?1:0),c=a.F._copyExact(e,n,E,t,c+8),n+=E;return c>>>3}var R=x.lits,y=x.strt,M=x.prev,F=0,w=0,I=0,g=0,D=0,f=0;for(_>2&&(y[f=a.F._hash(e,0)]=0),n=0;n<_;n++){if(D=f,n+1<_-2){f=a.F._hash(e,n+1);var u=n+1&32767;M[u]=y[f],y[f]=u}if(h<=n){(F>14e3||w>26697)&&_-n>100&&(h<n&&(R[F]=n-h,F+=2,h=n),c=a.F._writeBlock(n==_-1||h==_?1:0,R,F,g,e,I,n-I,t,c),F=w=g=0,I=n);var j=0;n<_-2&&(j=a.F._bestMatch(e,n,M,D,Math.min(m[2],_-n),m[3]));var E=j>>>16,k=65535&j;if(j!=0){k=65535&j;var S=r(E=j>>>16,x.of0);x.lhst[257+S]++;var N=r(k,x.df0);x.dhst[N]++,g+=x.exb[S]+x.dxb[N],R[F]=E<<23|n-h,R[F+1]=k<<16|S<<8|N,F+=2,h=n+E}else x.lhst[e[n]]++;w++}}for(I==n&&e.length!=0||(h<n&&(R[F]=n-h,F+=2,h=n),c=a.F._writeBlock(1,R,F,g,e,I,n-I,t,c),F=0,w=0,F=w=g=0,I=n);(7&c)!=0;)c++;return c>>>3},a.F._bestMatch=function(e,t,d,i,m,x){var r=32767&t,o=d[r],n=r-o+32768&32767;if(o==r||i!=a.F._hash(e,t-n))return 0;for(var c=0,h=0,_=Math.min(32767,t);n<=_&&--x!=0&&o!=r;){if(c==0||e[t+c]==e[t+c-n]){var R=a.F._howLong(e,t,n);if(R>c){if(h=n,(c=R)>=m)break;n+2<R&&(R=n+2);for(var y=0,M=0;M<R-2;M++){var F=t-n+M+32768&32767,w=F-d[F]+32768&32767;w>y&&(y=w,o=F)}}}n+=(r=o)-(o=d[r])+32768&32767}return c<<16|h},a.F._howLong=function(e,t,d){if(e[t]!=e[t-d]||e[t+1]!=e[t+1-d]||e[t+2]!=e[t+2-d])return 0;var i=t,m=Math.min(e.length,t+258);for(t+=3;t<m&&e[t]==e[t-d];)t++;return t-i},a.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},a.saved=0,a.F._writeBlock=function(e,t,d,i,m,x,r,o,n){var c,h,_,R,y,M,F,w,I,g=a.F.U,D=a.F._putsF,f=a.F._putsE;g.lhst[256]++,h=(c=a.F.getTrees())[0],_=c[1],R=c[2],y=c[3],M=c[4],F=c[5],w=c[6],I=c[7];var u=32+((n+3&7)==0?0:8-(n+3&7))+(r<<3),j=i+a.F.contSize(g.fltree,g.lhst)+a.F.contSize(g.fdtree,g.dhst),E=i+a.F.contSize(g.ltree,g.lhst)+a.F.contSize(g.dtree,g.dhst);E+=14+3*F+a.F.contSize(g.itree,g.ihst)+(2*g.ihst[16]+3*g.ihst[17]+7*g.ihst[18]);for(var k=0;k<286;k++)g.lhst[k]=0;for(k=0;k<30;k++)g.dhst[k]=0;for(k=0;k<19;k++)g.ihst[k]=0;var S=u<j&&u<E?0:j<E?1:2;if(D(o,n,e),D(o,n+1,S),n+=3,S==0){for(;(7&n)!=0;)n++;n=a.F._copyExact(m,x,r,o,n)}else{var N,A;if(S==1&&(N=g.fltree,A=g.fdtree),S==2){a.F.makeCodes(g.ltree,h),a.F.revCodes(g.ltree,h),a.F.makeCodes(g.dtree,_),a.F.revCodes(g.dtree,_),a.F.makeCodes(g.itree,R),a.F.revCodes(g.itree,R),N=g.ltree,A=g.dtree,f(o,n,y-257),f(o,n+=5,M-1),f(o,n+=5,F-4),n+=4;for(var s=0;s<F;s++)f(o,n+3*s,g.itree[1+(g.ordr[s]<<1)]);n+=3*F,n=a.F._codeTiny(w,g.itree,o,n),n=a.F._codeTiny(I,g.itree,o,n)}for(var l=x,P=0;P<d;P+=2){for(var U=t[P],O=U>>>23,$=l+(8388607&U);l<$;)n=a.F._writeLit(m[l++],N,o,n);if(O!=0){var W=t[P+1],z=W>>16,L=W>>8&255,T=255&W;f(o,n=a.F._writeLit(257+L,N,o,n),O-g.of0[L]),n+=g.exb[L],D(o,n=a.F._writeLit(T,A,o,n),z-g.df0[T]),n+=g.dxb[T],l+=O}}n=a.F._writeLit(256,N,o,n)}return n},a.F._copyExact=function(e,t,d,i,m){var x=m>>>3;return i[x]=d,i[x+1]=d>>>8,i[x+2]=255-i[x],i[x+3]=255-i[x+1],x+=4,i.set(new Uint8Array(e.buffer,t,d),x),m+(d+4<<3)},a.F.getTrees=function(){for(var e=a.F.U,t=a.F._hufTree(e.lhst,e.ltree,15),d=a.F._hufTree(e.dhst,e.dtree,15),i=[],m=a.F._lenCodes(e.ltree,i),x=[],r=a.F._lenCodes(e.dtree,x),o=0;o<i.length;o+=2)e.ihst[i[o]]++;for(o=0;o<x.length;o+=2)e.ihst[x[o]]++;for(var n=a.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&e.itree[1+(e.ordr[c-1]<<1)]==0;)c--;return[t,d,n,m,r,c,i,x]},a.F.getSecond=function(e){for(var t=[],d=0;d<e.length;d+=2)t.push(e[d+1]);return t},a.F.nonZero=function(e){for(var t="",d=0;d<e.length;d+=2)e[d+1]!=0&&(t+=(d>>1)+",");return t},a.F.contSize=function(e,t){for(var d=0,i=0;i<t.length;i++)d+=t[i]*e[1+(i<<1)];return d},a.F._codeTiny=function(e,t,d,i){for(var m=0;m<e.length;m+=2){var x=e[m],r=e[m+1];i=a.F._writeLit(x,t,d,i);var o=x==16?2:x==17?3:7;x>15&&(a.F._putsE(d,i,r,o),i+=o)}return i},a.F._lenCodes=function(e,t){for(var d=e.length;d!=2&&e[d-1]==0;)d-=2;for(var i=0;i<d;i+=2){var m=e[i+1],x=i+3<d?e[i+3]:-1,r=i+5<d?e[i+5]:-1,o=i==0?-1:e[i-1];if(m==0&&x==m&&r==m){for(var n=i+5;n+2<d&&e[n+2]==m;)n+=2;(c=Math.min(n+1-i>>>1,138))<11?t.push(17,c-3):t.push(18,c-11),i+=2*c-2}else if(m==o&&x==m&&r==m){for(n=i+5;n+2<d&&e[n+2]==m;)n+=2;var c=Math.min(n+1-i>>>1,6);t.push(16,c-3),i+=2*c-2}else t.push(m,0)}return d>>>1},a.F._hufTree=function(e,t,d){var i=[],m=e.length,x=t.length,r=0;for(r=0;r<x;r+=2)t[r]=0,t[r+1]=0;for(r=0;r<m;r++)e[r]!=0&&i.push({lit:r,f:e[r]});var o=i.length,n=i.slice(0);if(o==0)return 0;if(o==1){var c=i[0].lit;return n=c==0?1:0,t[1+(c<<1)]=1,t[1+(n<<1)]=1,1}i.sort(function(w,I){return w.f-I.f});var h=i[0],_=i[1],R=0,y=1,M=2;for(i[0]={lit:-1,f:h.f+_.f,l:h,r:_,d:0};y!=o-1;)h=R!=y&&(M==o||i[R].f<i[M].f)?i[R++]:i[M++],_=R!=y&&(M==o||i[R].f<i[M].f)?i[R++]:i[M++],i[y++]={lit:-1,f:h.f+_.f,l:h,r:_};var F=a.F.setDepth(i[y-1],0);for(F>d&&(a.F.restrictDepth(n,d,F),F=d),r=0;r<o;r++)t[1+(n[r].lit<<1)]=n[r].d;return F},a.F.setDepth=function(e,t){return e.lit!=-1?(e.d=t,t):Math.max(a.F.setDepth(e.l,t+1),a.F.setDepth(e.r,t+1))},a.F.restrictDepth=function(e,t,d){var i=0,m=1<<d-t,x=0;for(e.sort(function(o,n){return n.d==o.d?o.f-n.f:n.d-o.d}),i=0;i<e.length&&e[i].d>t;i++){var r=e[i].d;e[i].d=t,x+=m-(1<<d-r)}for(x>>>=d-t;x>0;)(r=e[i].d)<t?(e[i].d++,x-=1<<t-r-1):i++;for(;i>=0;i--)e[i].d==t&&x<0&&(e[i].d--,x++);x!=0&&console.log("debt left")},a.F._goodIndex=function(e,t){var d=0;return t[16|d]<=e&&(d|=16),t[8|d]<=e&&(d|=8),t[4|d]<=e&&(d|=4),t[2|d]<=e&&(d|=2),t[1|d]<=e&&(d|=1),d},a.F._writeLit=function(e,t,d,i){return a.F._putsF(d,i,t[e<<1]),i+t[1+(e<<1)]},a.F.inflate=function(e,t){var d=Uint8Array;if(e[0]==3&&e[1]==0)return t||new d(0);var i=a.F,m=i._bitsF,x=i._bitsE,r=i._decodeTiny,o=i.makeCodes,n=i.codes2map,c=i._get17,h=i.U,_=t==null;_&&(t=new d(e.length>>>2<<3));for(var R,y,M=0,F=0,w=0,I=0,g=0,D=0,f=0,u=0,j=0;M==0;)if(M=m(e,j,1),F=m(e,j+1,2),j+=3,F!=0){if(_&&(t=a.F._check(t,u+(1<<17))),F==1&&(R=h.flmap,y=h.fdmap,D=511,f=31),F==2){w=x(e,j,5)+257,I=x(e,j+5,5)+1,g=x(e,j+10,4)+4,j+=14;for(var E=0;E<38;E+=2)h.itree[E]=0,h.itree[E+1]=0;var k=1;for(E=0;E<g;E++){var S=x(e,j+3*E,3);h.itree[1+(h.ordr[E]<<1)]=S,S>k&&(k=S)}j+=3*g,o(h.itree,k),n(h.itree,k,h.imap),R=h.lmap,y=h.dmap,j=r(h.imap,(1<<k)-1,w+I,e,j,h.ttree);var N=i._copyOut(h.ttree,0,w,h.ltree);D=(1<<N)-1;var A=i._copyOut(h.ttree,w,I,h.dtree);f=(1<<A)-1,o(h.ltree,N),n(h.ltree,N,R),o(h.dtree,A),n(h.dtree,A,y)}for(;;){var s=R[c(e,j)&D];j+=15&s;var l=s>>>4;if(!(l>>>8))t[u++]=l;else{if(l==256)break;var P=u+l-254;if(l>264){var U=h.ldef[l-257];P=u+(U>>>3)+x(e,j,7&U),j+=7&U}var O=y[c(e,j)&f];j+=15&O;var $=O>>>4,W=h.ddef[$],z=(W>>>4)+m(e,j,15&W);for(j+=15&W,_&&(t=a.F._check(t,u+(1<<17)));u<P;)t[u]=t[u++-z],t[u]=t[u++-z],t[u]=t[u++-z],t[u]=t[u++-z];u=P}}}else{(7&j)!=0&&(j+=8-(7&j));var L=4+(j>>>3),T=e[L-4]|e[L-3]<<8;_&&(t=a.F._check(t,u+T)),t.set(new d(e.buffer,e.byteOffset+L,T),u),j=L+T<<3,u+=T}return t.length==u?t:t.slice(0,u)},a.F._check=function(e,t){var d=e.length;if(t<=d)return e;var i=new Uint8Array(Math.max(d<<1,t));return i.set(e,0),i},a.F._decodeTiny=function(e,t,d,i,m,x){for(var r=a.F._bitsE,o=a.F._get17,n=0;n<d;){var c=e[o(i,m)&t];m+=15&c;var h=c>>>4;if(h<=15)x[n]=h,n++;else{var _=0,R=0;h==16?(R=3+r(i,m,2),m+=2,_=x[n-1]):h==17?(R=3+r(i,m,3),m+=3):h==18&&(R=11+r(i,m,7),m+=7);for(var y=n+R;n<y;)x[n]=_,n++}}return m},a.F._copyOut=function(e,t,d,i){for(var m=0,x=0,r=i.length>>>1;x<d;){var o=e[x+t];i[x<<1]=0,i[1+(x<<1)]=o,o>m&&(m=o),x++}for(;x<r;)i[x<<1]=0,i[1+(x<<1)]=0,x++;return m},a.F.makeCodes=function(e,t){for(var d,i,m,x,r=a.F.U,o=e.length,n=r.bl_count,c=0;c<=t;c++)n[c]=0;for(c=1;c<o;c+=2)n[e[c]]++;var h=r.next_code;for(d=0,n[0]=0,i=1;i<=t;i++)d=d+n[i-1]<<1,h[i]=d;for(m=0;m<o;m+=2)(x=e[m+1])!=0&&(e[m]=h[x],h[x]++)},a.F.codes2map=function(e,t,d){for(var i=e.length,m=a.F.U.rev15,x=0;x<i;x+=2)if(e[x+1]!=0)for(var r=x>>1,o=e[x+1],n=r<<4|o,c=t-o,h=e[x]<<c,_=h+(1<<c);h!=_;)d[m[h]>>>15-t]=n,h++},a.F.revCodes=function(e,t){for(var d=a.F.U.rev15,i=15-t,m=0;m<e.length;m+=2){var x=e[m]<<t-e[m+1];e[m]=d[x]>>>i}},a.F._putsE=function(e,t,d){d<<=7&t;var i=t>>>3;e[i]|=d,e[i+1]|=d>>>8},a.F._putsF=function(e,t,d){d<<=7&t;var i=t>>>3;e[i]|=d,e[i+1]|=d>>>8,e[i+2]|=d>>>16},a.F._bitsE=function(e,t,d){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<d)-1},a.F._bitsF=function(e,t,d){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<d)-1},a.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},a.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},a.F.U=(v=Uint16Array,C=Uint32Array,{next_code:new v(16),bl_count:new v(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new v(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new C(32),flmap:new v(512),fltree:[],fdmap:new v(32),fdtree:[],lmap:new v(32768),ltree:[],ttree:[],dmap:new v(32768),dtree:[],imap:new v(512),itree:[],rev15:new v(32768),lhst:new C(286),dhst:new C(30),ihst:new C(19),lits:new C(15e3),strt:new v(65536),prev:new v(32768)}),function(){for(var e=a.F.U,t=0;t<32768;t++){var d=t;d=(4278255360&(d=(4042322160&(d=(3435973836&(d=(2863311530&d)>>>1|(1431655765&d)<<1))>>>2|(858993459&d)<<2))>>>4|(252645135&d)<<4))>>>8|(16711935&d)<<8,e.rev15[t]=(d>>>16|d<<16)>>>17}function i(m,x,r){for(;x--!=0;)m.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),a.F.makeCodes(e.fltree,9),a.F.codes2map(e.fltree,9,e.flmap),a.F.revCodes(e.fltree,9),i(e.fdtree,32,5),a.F.makeCodes(e.fdtree,5),a.F.codes2map(e.fdtree,5,e.fdmap),a.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}()})();var dr=sr({__proto__:null,default:Ve},[Ve]);const pe=function(){var p={nextZero(r,o){for(;r[o]!=0;)o++;return o},readUshort:(r,o)=>r[o]<<8|r[o+1],writeUshort(r,o,n){r[o]=n>>8&255,r[o+1]=255&n},readUint:(r,o)=>16777216*r[o]+(r[o+1]<<16|r[o+2]<<8|r[o+3]),writeUint(r,o,n){r[o]=n>>24&255,r[o+1]=n>>16&255,r[o+2]=n>>8&255,r[o+3]=255&n},readASCII(r,o,n){let c="";for(let h=0;h<n;h++)c+=String.fromCharCode(r[o+h]);return c},writeASCII(r,o,n){for(let c=0;c<n.length;c++)r[o+c]=n.charCodeAt(c)},readBytes(r,o,n){const c=[];for(let h=0;h<n;h++)c.push(r[o+h]);return c},pad:r=>r.length<2?`0${r}`:r,readUTF8(r,o,n){let c,h="";for(let _=0;_<n;_++)h+=`%${p.pad(r[o+_].toString(16))}`;try{c=decodeURIComponent(h)}catch{return p.readASCII(r,o,n)}return c}};function v(r,o,n,c){const h=o*n,_=t(c),R=Math.ceil(o*_/8),y=new Uint8Array(4*h),M=new Uint32Array(y.buffer),{ctype:F}=c,{depth:w}=c,I=p.readUshort;if(F==6){const U=h<<2;if(w==8)for(var g=0;g<U;g+=4)y[g]=r[g],y[g+1]=r[g+1],y[g+2]=r[g+2],y[g+3]=r[g+3];if(w==16)for(g=0;g<U;g++)y[g]=r[g<<1]}else if(F==2){const U=c.tabs.tRNS;if(U==null){if(w==8)for(g=0;g<h;g++){var D=3*g;M[g]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D]}if(w==16)for(g=0;g<h;g++)D=6*g,M[g]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D]}else{var f=U[0];const O=U[1],$=U[2];if(w==8)for(g=0;g<h;g++){var u=g<<2;D=3*g,M[g]=255<<24|r[D+2]<<16|r[D+1]<<8|r[D],r[D]==f&&r[D+1]==O&&r[D+2]==$&&(y[u+3]=0)}if(w==16)for(g=0;g<h;g++)u=g<<2,D=6*g,M[g]=255<<24|r[D+4]<<16|r[D+2]<<8|r[D],I(r,D)==f&&I(r,D+2)==O&&I(r,D+4)==$&&(y[u+3]=0)}}else if(F==3){const U=c.tabs.PLTE,O=c.tabs.tRNS,$=O?O.length:0;if(w==1)for(var j=0;j<n;j++){var E=j*R,k=j*o;for(g=0;g<o;g++){u=k+g<<2;var S=3*(N=r[E+(g>>3)]>>7-((7&g)<<0)&1);y[u]=U[S],y[u+1]=U[S+1],y[u+2]=U[S+2],y[u+3]=N<$?O[N]:255}}if(w==2)for(j=0;j<n;j++)for(E=j*R,k=j*o,g=0;g<o;g++)u=k+g<<2,S=3*(N=r[E+(g>>2)]>>6-((3&g)<<1)&3),y[u]=U[S],y[u+1]=U[S+1],y[u+2]=U[S+2],y[u+3]=N<$?O[N]:255;if(w==4)for(j=0;j<n;j++)for(E=j*R,k=j*o,g=0;g<o;g++)u=k+g<<2,S=3*(N=r[E+(g>>1)]>>4-((1&g)<<2)&15),y[u]=U[S],y[u+1]=U[S+1],y[u+2]=U[S+2],y[u+3]=N<$?O[N]:255;if(w==8)for(g=0;g<h;g++){var N;u=g<<2,S=3*(N=r[g]),y[u]=U[S],y[u+1]=U[S+1],y[u+2]=U[S+2],y[u+3]=N<$?O[N]:255}}else if(F==4){if(w==8)for(g=0;g<h;g++){u=g<<2;var A=r[s=g<<1];y[u]=A,y[u+1]=A,y[u+2]=A,y[u+3]=r[s+1]}if(w==16)for(g=0;g<h;g++){var s;u=g<<2,A=r[s=g<<2],y[u]=A,y[u+1]=A,y[u+2]=A,y[u+3]=r[s+2]}}else if(F==0)for(f=c.tabs.tRNS?c.tabs.tRNS:-1,j=0;j<n;j++){const U=j*R,O=j*o;if(w==1)for(var l=0;l<o;l++){var P=(A=255*(r[U+(l>>>3)]>>>7-(7&l)&1))==255*f?0:255;M[O+l]=P<<24|A<<16|A<<8|A}else if(w==2)for(l=0;l<o;l++)P=(A=85*(r[U+(l>>>2)]>>>6-((3&l)<<1)&3))==85*f?0:255,M[O+l]=P<<24|A<<16|A<<8|A;else if(w==4)for(l=0;l<o;l++)P=(A=17*(r[U+(l>>>1)]>>>4-((1&l)<<2)&15))==17*f?0:255,M[O+l]=P<<24|A<<16|A<<8|A;else if(w==8)for(l=0;l<o;l++)P=(A=r[U+l])==f?0:255,M[O+l]=P<<24|A<<16|A<<8|A;else if(w==16)for(l=0;l<o;l++)A=r[U+(l<<1)],P=I(r,U+(l<<1))==f?0:255,M[O+l]=P<<24|A<<16|A<<8|A}return y}function C(r,o,n,c){const h=t(r),_=Math.ceil(n*h/8),R=new Uint8Array((_+1+r.interlace)*c);return o=r.tabs.CgBI?e(o,R):a(o,R),r.interlace==0?o=d(o,r,0,n,c):r.interlace==1&&(o=function(M,F){const w=F.width,I=F.height,g=t(F),D=g>>3,f=Math.ceil(w*g/8),u=new Uint8Array(I*f);let j=0;const E=[0,0,4,0,2,0,1],k=[0,4,0,2,0,1,0],S=[8,8,8,4,4,2,2],N=[8,8,4,4,2,2,1];let A=0;for(;A<7;){const l=S[A],P=N[A];let U=0,O=0,$=E[A];for(;$<I;)$+=l,O++;let W=k[A];for(;W<w;)W+=P,U++;const z=Math.ceil(U*g/8);d(M,F,j,U,O);let L=0,T=E[A];for(;T<I;){let B=k[A],Z=j+L*z<<3;for(;B<w;){var s;if(g==1&&(s=(s=M[Z>>3])>>7-(7&Z)&1,u[T*f+(B>>3)]|=s<<7-((7&B)<<0)),g==2&&(s=(s=M[Z>>3])>>6-(7&Z)&3,u[T*f+(B>>2)]|=s<<6-((3&B)<<1)),g==4&&(s=(s=M[Z>>3])>>4-(7&Z)&15,u[T*f+(B>>1)]|=s<<4-((1&B)<<2)),g>=8){const K=T*f+B*D;for(let q=0;q<D;q++)u[K+q]=M[(Z>>3)+q]}Z+=g,B+=P}L++,T+=l}U*O!=0&&(j+=O*(1+z)),A+=1}return u}(o,r)),o}function a(r,o){return e(new Uint8Array(r.buffer,2,r.length-6),o)}var e=function(){const r={H:{}};return r.H.N=function(o,n){const c=Uint8Array;let h,_,R=0,y=0,M=0,F=0,w=0,I=0,g=0,D=0,f=0;if(o[0]==3&&o[1]==0)return n||new c(0);const u=r.H,j=u.b,E=u.e,k=u.R,S=u.n,N=u.A,A=u.Z,s=u.m,l=n==null;for(l&&(n=new c(o.length>>>2<<5));R==0;)if(R=j(o,f,1),y=j(o,f+1,2),f+=3,y!=0){if(l&&(n=r.H.W(n,D+(1<<17))),y==1&&(h=s.J,_=s.h,I=511,g=31),y==2){M=E(o,f,5)+257,F=E(o,f+5,5)+1,w=E(o,f+10,4)+4,f+=14;let U=1;for(var P=0;P<38;P+=2)s.Q[P]=0,s.Q[P+1]=0;for(P=0;P<w;P++){const W=E(o,f+3*P,3);s.Q[1+(s.X[P]<<1)]=W,W>U&&(U=W)}f+=3*w,S(s.Q,U),N(s.Q,U,s.u),h=s.w,_=s.d,f=k(s.u,(1<<U)-1,M+F,o,f,s.v);const O=u.V(s.v,0,M,s.C);I=(1<<O)-1;const $=u.V(s.v,M,F,s.D);g=(1<<$)-1,S(s.C,O),N(s.C,O,h),S(s.D,$),N(s.D,$,_)}for(;;){const U=h[A(o,f)&I];f+=15&U;const O=U>>>4;if(!(O>>>8))n[D++]=O;else{if(O==256)break;{let $=D+O-254;if(O>264){const B=s.q[O-257];$=D+(B>>>3)+E(o,f,7&B),f+=7&B}const W=_[A(o,f)&g];f+=15&W;const z=W>>>4,L=s.c[z],T=(L>>>4)+j(o,f,15&L);for(f+=15&L;D<$;)n[D]=n[D++-T],n[D]=n[D++-T],n[D]=n[D++-T],n[D]=n[D++-T];D=$}}}}else{(7&f)!=0&&(f+=8-(7&f));const U=4+(f>>>3),O=o[U-4]|o[U-3]<<8;l&&(n=r.H.W(n,D+O)),n.set(new c(o.buffer,o.byteOffset+U,O),D),f=U+O<<3,D+=O}return n.length==D?n:n.slice(0,D)},r.H.W=function(o,n){const c=o.length;if(n<=c)return o;const h=new Uint8Array(c<<1);return h.set(o,0),h},r.H.R=function(o,n,c,h,_,R){const y=r.H.e,M=r.H.Z;let F=0;for(;F<c;){const w=o[M(h,_)&n];_+=15&w;const I=w>>>4;if(I<=15)R[F]=I,F++;else{let g=0,D=0;I==16?(D=3+y(h,_,2),_+=2,g=R[F-1]):I==17?(D=3+y(h,_,3),_+=3):I==18&&(D=11+y(h,_,7),_+=7);const f=F+D;for(;F<f;)R[F]=g,F++}}return _},r.H.V=function(o,n,c,h){let _=0,R=0;const y=h.length>>>1;for(;R<c;){const M=o[R+n];h[R<<1]=0,h[1+(R<<1)]=M,M>_&&(_=M),R++}for(;R<y;)h[R<<1]=0,h[1+(R<<1)]=0,R++;return _},r.H.n=function(o,n){const c=r.H.m,h=o.length;let _,R,y,M;const F=c.j;for(var w=0;w<=n;w++)F[w]=0;for(w=1;w<h;w+=2)F[o[w]]++;const I=c.K;for(_=0,F[0]=0,R=1;R<=n;R++)_=_+F[R-1]<<1,I[R]=_;for(y=0;y<h;y+=2)M=o[y+1],M!=0&&(o[y]=I[M],I[M]++)},r.H.A=function(o,n,c){const h=o.length,_=r.H.m.r;for(let R=0;R<h;R+=2)if(o[R+1]!=0){const y=R>>1,M=o[R+1],F=y<<4|M,w=n-M;let I=o[R]<<w;const g=I+(1<<w);for(;I!=g;)c[_[I]>>>15-n]=F,I++}},r.H.l=function(o,n){const c=r.H.m.r,h=15-n;for(let _=0;_<o.length;_+=2){const R=o[_]<<n-o[_+1];o[_]=c[R]>>>h}},r.H.M=function(o,n,c){c<<=7&n;const h=n>>>3;o[h]|=c,o[h+1]|=c>>>8},r.H.I=function(o,n,c){c<<=7&n;const h=n>>>3;o[h]|=c,o[h+1]|=c>>>8,o[h+2]|=c>>>16},r.H.e=function(o,n,c){return(o[n>>>3]|o[1+(n>>>3)]<<8)>>>(7&n)&(1<<c)-1},r.H.b=function(o,n,c){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16)>>>(7&n)&(1<<c)-1},r.H.Z=function(o,n){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16)>>>(7&n)},r.H.i=function(o,n){return(o[n>>>3]|o[1+(n>>>3)]<<8|o[2+(n>>>3)]<<16|o[3+(n>>>3)]<<24)>>>(7&n)},r.H.m=function(){const o=Uint16Array,n=Uint32Array;return{K:new o(16),j:new o(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new o(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new o(512),_:[],h:new o(32),$:[],w:new o(32768),C:[],v:[],d:new o(32768),D:[],u:new o(512),Q:[],r:new o(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new o(65536),g:new o(32768)}}(),function(){const o=r.H.m;for(var n=0;n<32768;n++){let h=n;h=(2863311530&h)>>>1|(1431655765&h)<<1,h=(3435973836&h)>>>2|(858993459&h)<<2,h=(4042322160&h)>>>4|(252645135&h)<<4,h=(4278255360&h)>>>8|(16711935&h)<<8,o.r[n]=(h>>>16|h<<16)>>>17}function c(h,_,R){for(;_--!=0;)h.push(0,R)}for(n=0;n<32;n++)o.q[n]=o.S[n]<<3|o.T[n],o.c[n]=o.p[n]<<4|o.z[n];c(o._,144,8),c(o._,112,9),c(o._,24,7),c(o._,8,8),r.H.n(o._,9),r.H.A(o._,9,o.J),r.H.l(o._,9),c(o.$,32,5),r.H.n(o.$,5),r.H.A(o.$,5,o.h),r.H.l(o.$,5),c(o.Q,19,0),c(o.C,286,0),c(o.D,30,0),c(o.v,320,0)}(),r.H.N}();function t(r){return[1,null,3,1,2,null,4][r.ctype]*r.depth}function d(r,o,n,c,h){let _=t(o);const R=Math.ceil(c*_/8);let y,M;_=Math.ceil(_/8);let F=r[n],w=0;if(F>1&&(r[n]=[0,0,1][F-2]),F==3)for(w=_;w<R;w++)r[w+1]=r[w+1]+(r[w+1-_]>>>1)&255;for(let I=0;I<h;I++)if(y=n+I*R,M=y+I+1,F=r[M-1],w=0,F==0)for(;w<R;w++)r[y+w]=r[M+w];else if(F==1){for(;w<_;w++)r[y+w]=r[M+w];for(;w<R;w++)r[y+w]=r[M+w]+r[y+w-_]}else if(F==2)for(;w<R;w++)r[y+w]=r[M+w]+r[y+w-R];else if(F==3){for(;w<_;w++)r[y+w]=r[M+w]+(r[y+w-R]>>>1);for(;w<R;w++)r[y+w]=r[M+w]+(r[y+w-R]+r[y+w-_]>>>1)}else{for(;w<_;w++)r[y+w]=r[M+w]+i(0,r[y+w-R],0);for(;w<R;w++)r[y+w]=r[M+w]+i(r[y+w-_],r[y+w-R],r[y+w-_-R])}return r}function i(r,o,n){const c=r+o-n,h=c-r,_=c-o,R=c-n;return h*h<=_*_&&h*h<=R*R?r:_*_<=R*R?o:n}function m(r,o,n){n.width=p.readUint(r,o),o+=4,n.height=p.readUint(r,o),o+=4,n.depth=r[o],o++,n.ctype=r[o],o++,n.compress=r[o],o++,n.filter=r[o],o++,n.interlace=r[o],o++}function x(r,o,n,c,h,_,R,y,M){const F=Math.min(o,h),w=Math.min(n,_);let I=0,g=0;for(let A=0;A<w;A++)for(let s=0;s<F;s++)if(R>=0&&y>=0?(I=A*o+s<<2,g=(y+A)*h+R+s<<2):(I=(-y+A)*o-R+s<<2,g=A*h+s<<2),M==0)c[g]=r[I],c[g+1]=r[I+1],c[g+2]=r[I+2],c[g+3]=r[I+3];else if(M==1){var D=r[I+3]*.00392156862745098,f=r[I]*D,u=r[I+1]*D,j=r[I+2]*D,E=c[g+3]*(1/255),k=c[g]*E,S=c[g+1]*E,N=c[g+2]*E;const l=1-D,P=D+E*l,U=P==0?0:1/P;c[g+3]=255*P,c[g+0]=(f+k*l)*U,c[g+1]=(u+S*l)*U,c[g+2]=(j+N*l)*U}else if(M==2)D=r[I+3],f=r[I],u=r[I+1],j=r[I+2],E=c[g+3],k=c[g],S=c[g+1],N=c[g+2],D==E&&f==k&&u==S&&j==N?(c[g]=0,c[g+1]=0,c[g+2]=0,c[g+3]=0):(c[g]=f,c[g+1]=u,c[g+2]=j,c[g+3]=D);else if(M==3){if(D=r[I+3],f=r[I],u=r[I+1],j=r[I+2],E=c[g+3],k=c[g],S=c[g+1],N=c[g+2],D==E&&f==k&&u==S&&j==N)continue;if(D<220&&E>20)return!1}return!0}return{decode:function(o){const n=new Uint8Array(o);let c=8;const h=p,_=h.readUshort,R=h.readUint,y={tabs:{},frames:[]},M=new Uint8Array(n.length);let F,w=0,I=0;const g=[137,80,78,71,13,10,26,10];for(var D=0;D<8;D++)if(n[D]!=g[D])throw"The input is not a PNG file!";for(;c<n.length;){const A=h.readUint(n,c);c+=4;const s=h.readASCII(n,c,4);if(c+=4,s=="IHDR")m(n,c,y);else if(s=="iCCP"){for(var f=c;n[f]!=0;)f++;h.readASCII(n,c,f-c),n[f+1];const l=n.slice(f+2,c+A);let P=null;try{P=a(l)}catch{P=e(l)}y.tabs[s]=P}else if(s=="CgBI")y.tabs[s]=n.slice(c,c+4);else if(s=="IDAT"){for(D=0;D<A;D++)M[w+D]=n[c+D];w+=A}else if(s=="acTL")y.tabs[s]={num_frames:R(n,c),num_plays:R(n,c+4)},F=new Uint8Array(n.length);else if(s=="fcTL"){I!=0&&((N=y.frames[y.frames.length-1]).data=C(y,F.slice(0,I),N.rect.width,N.rect.height),I=0);const l={x:R(n,c+12),y:R(n,c+16),width:R(n,c+4),height:R(n,c+8)};let P=_(n,c+22);P=_(n,c+20)/(P==0?100:P);const U={rect:l,delay:Math.round(1e3*P),dispose:n[c+24],blend:n[c+25]};y.frames.push(U)}else if(s=="fdAT"){for(D=0;D<A-4;D++)F[I+D]=n[c+D+4];I+=A-4}else if(s=="pHYs")y.tabs[s]=[h.readUint(n,c),h.readUint(n,c+4),n[c+8]];else if(s=="cHRM")for(y.tabs[s]=[],D=0;D<8;D++)y.tabs[s].push(h.readUint(n,c+4*D));else if(s=="tEXt"||s=="zTXt"){y.tabs[s]==null&&(y.tabs[s]={});var u=h.nextZero(n,c),j=h.readASCII(n,c,u-c),E=c+A-u-1;if(s=="tEXt")S=h.readASCII(n,u+1,E);else{var k=a(n.slice(u+2,u+2+E));S=h.readUTF8(k,0,k.length)}y.tabs[s][j]=S}else if(s=="iTXt"){y.tabs[s]==null&&(y.tabs[s]={}),u=0,f=c,u=h.nextZero(n,f),j=h.readASCII(n,f,u-f);const l=n[f=u+1];var S;n[f+1],f+=2,u=h.nextZero(n,f),h.readASCII(n,f,u-f),f=u+1,u=h.nextZero(n,f),h.readUTF8(n,f,u-f),E=A-((f=u+1)-c),l==0?S=h.readUTF8(n,f,E):(k=a(n.slice(f,f+E)),S=h.readUTF8(k,0,k.length)),y.tabs[s][j]=S}else if(s=="PLTE")y.tabs[s]=h.readBytes(n,c,A);else if(s=="hIST"){const l=y.tabs.PLTE.length/3;for(y.tabs[s]=[],D=0;D<l;D++)y.tabs[s].push(_(n,c+2*D))}else if(s=="tRNS")y.ctype==3?y.tabs[s]=h.readBytes(n,c,A):y.ctype==0?y.tabs[s]=_(n,c):y.ctype==2&&(y.tabs[s]=[_(n,c),_(n,c+2),_(n,c+4)]);else if(s=="gAMA")y.tabs[s]=h.readUint(n,c)/1e5;else if(s=="sRGB")y.tabs[s]=n[c];else if(s=="bKGD")y.ctype==0||y.ctype==4?y.tabs[s]=[_(n,c)]:y.ctype==2||y.ctype==6?y.tabs[s]=[_(n,c),_(n,c+2),_(n,c+4)]:y.ctype==3&&(y.tabs[s]=n[c]);else if(s=="IEND")break;c+=A,h.readUint(n,c),c+=4}var N;return I!=0&&((N=y.frames[y.frames.length-1]).data=C(y,F.slice(0,I),N.rect.width,N.rect.height)),y.data=C(y,M,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(o){const n=o.width,c=o.height;if(o.tabs.acTL==null)return[v(o.data,n,c,o).buffer];const h=[];o.frames[0].data==null&&(o.frames[0].data=o.data);const _=n*c*4,R=new Uint8Array(_),y=new Uint8Array(_),M=new Uint8Array(_);for(let w=0;w<o.frames.length;w++){const I=o.frames[w],g=I.rect.x,D=I.rect.y,f=I.rect.width,u=I.rect.height,j=v(I.data,f,u,o);if(w!=0)for(var F=0;F<_;F++)M[F]=R[F];if(I.blend==0?x(j,f,u,R,n,c,g,D,0):I.blend==1&&x(j,f,u,R,n,c,g,D,1),h.push(R.buffer.slice(0)),I.dispose!=0){if(I.dispose==1)x(y,f,u,R,n,c,g,D,0);else if(I.dispose==2)for(F=0;F<_;F++)R[F]=M[F]}}return h},_paeth:i,_copyTile:x,_bin:p}}();(function(){const{_copyTile:p}=pe,{_bin:v}=pe,C=pe._paeth;var a={table:function(){const f=new Uint32Array(256);for(let u=0;u<256;u++){let j=u;for(let E=0;E<8;E++)1&j?j=3988292384^j>>>1:j>>>=1;f[u]=j}return f}(),update(f,u,j,E){for(let k=0;k<E;k++)f=a.table[255&(f^u[j+k])]^f>>>8;return f},crc:(f,u,j)=>4294967295^a.update(4294967295,f,u,j)};function e(f,u,j,E){u[j]+=f[0]*E>>4,u[j+1]+=f[1]*E>>4,u[j+2]+=f[2]*E>>4,u[j+3]+=f[3]*E>>4}function t(f){return Math.max(0,Math.min(255,f))}function d(f,u){const j=f[0]-u[0],E=f[1]-u[1],k=f[2]-u[2],S=f[3]-u[3];return j*j+E*E+k*k+S*S}function i(f,u,j,E,k,S,N){N==null&&(N=1);const A=E.length,s=[];for(var l=0;l<A;l++){const T=E[l];s.push([T>>>0&255,T>>>8&255,T>>>16&255,T>>>24&255])}for(l=0;l<A;l++){let T=4294967295;for(var P=0,U=0;U<A;U++){var O=d(s[l],s[U]);U!=l&&O<T&&(T=O,P=U)}}const $=new Uint32Array(k.buffer),W=new Int16Array(u*j*4),z=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(l=0;l<z.length;l++)z[l]=255*((z[l]+.5)/16-.5);for(let T=0;T<j;T++)for(let B=0;B<u;B++){var L;l=4*(T*u+B),N!=2?L=[t(f[l]+W[l]),t(f[l+1]+W[l+1]),t(f[l+2]+W[l+2]),t(f[l+3]+W[l+3])]:(O=z[4*(3&T)+(3&B)],L=[t(f[l]+O),t(f[l+1]+O),t(f[l+2]+O),t(f[l+3]+O)]),P=0;let Z=16777215;for(U=0;U<A;U++){const Q=d(L,s[U]);Q<Z&&(Z=Q,P=U)}const K=s[P],q=[L[0]-K[0],L[1]-K[1],L[2]-K[2],L[3]-K[3]];N==1&&(B!=u-1&&e(q,W,l+4,7),T!=j-1&&(B!=0&&e(q,W,l+4*u-4,3),e(q,W,l+4*u,5),B!=u-1&&e(q,W,l+4*u+4,1))),S[l>>2]=P,$[l>>2]=E[P]}}function m(f,u,j,E,k){k==null&&(k={});const{crc:S}=a,N=v.writeUint,A=v.writeUshort,s=v.writeASCII;let l=8;const P=f.frames.length>1;let U,O=!1,$=33+(P?20:0);if(k.sRGB!=null&&($+=13),k.pHYs!=null&&($+=21),k.iCCP!=null&&(U=pako.deflate(k.iCCP),$+=21+U.length+4),f.ctype==3){for(var W=f.plte.length,z=0;z<W;z++)f.plte[z]>>>24!=255&&(O=!0);$+=8+3*W+4+(O?8+1*W+4:0)}for(var L=0;L<f.frames.length;L++)P&&($+=38),$+=(K=f.frames[L]).cimg.length+12,L!=0&&($+=4);$+=12;const T=new Uint8Array($),B=[137,80,78,71,13,10,26,10];for(z=0;z<8;z++)T[z]=B[z];if(N(T,l,13),l+=4,s(T,l,"IHDR"),l+=4,N(T,l,u),l+=4,N(T,l,j),l+=4,T[l]=f.depth,l++,T[l]=f.ctype,l++,T[l]=0,l++,T[l]=0,l++,T[l]=0,l++,N(T,l,S(T,l-17,17)),l+=4,k.sRGB!=null&&(N(T,l,1),l+=4,s(T,l,"sRGB"),l+=4,T[l]=k.sRGB,l++,N(T,l,S(T,l-5,5)),l+=4),k.iCCP!=null){const q=13+U.length;N(T,l,q),l+=4,s(T,l,"iCCP"),l+=4,s(T,l,"ICC profile"),l+=11,l+=2,T.set(U,l),l+=U.length,N(T,l,S(T,l-(q+4),q+4)),l+=4}if(k.pHYs!=null&&(N(T,l,9),l+=4,s(T,l,"pHYs"),l+=4,N(T,l,k.pHYs[0]),l+=4,N(T,l,k.pHYs[1]),l+=4,T[l]=k.pHYs[2],l++,N(T,l,S(T,l-13,13)),l+=4),P&&(N(T,l,8),l+=4,s(T,l,"acTL"),l+=4,N(T,l,f.frames.length),l+=4,N(T,l,k.loop!=null?k.loop:0),l+=4,N(T,l,S(T,l-12,12)),l+=4),f.ctype==3){for(N(T,l,3*(W=f.plte.length)),l+=4,s(T,l,"PLTE"),l+=4,z=0;z<W;z++){const q=3*z,Q=f.plte[z],J=255&Q,ne=Q>>>8&255,Ee=Q>>>16&255;T[l+q+0]=J,T[l+q+1]=ne,T[l+q+2]=Ee}if(l+=3*W,N(T,l,S(T,l-3*W-4,3*W+4)),l+=4,O){for(N(T,l,W),l+=4,s(T,l,"tRNS"),l+=4,z=0;z<W;z++)T[l+z]=f.plte[z]>>>24&255;l+=W,N(T,l,S(T,l-W-4,W+4)),l+=4}}let Z=0;for(L=0;L<f.frames.length;L++){var K=f.frames[L];P&&(N(T,l,26),l+=4,s(T,l,"fcTL"),l+=4,N(T,l,Z++),l+=4,N(T,l,K.rect.width),l+=4,N(T,l,K.rect.height),l+=4,N(T,l,K.rect.x),l+=4,N(T,l,K.rect.y),l+=4,A(T,l,E[L]),l+=2,A(T,l,1e3),l+=2,T[l]=K.dispose,l++,T[l]=K.blend,l++,N(T,l,S(T,l-30,30)),l+=4);const q=K.cimg;N(T,l,(W=q.length)+(L==0?0:4)),l+=4;const Q=l;s(T,l,L==0?"IDAT":"fdAT"),l+=4,L!=0&&(N(T,l,Z++),l+=4),T.set(q,l),l+=W,N(T,l,S(T,Q,l-Q)),l+=4}return N(T,l,0),l+=4,s(T,l,"IEND"),l+=4,N(T,l,S(T,l-4,4)),l+=4,T.buffer}function x(f,u,j){for(let E=0;E<f.frames.length;E++){const k=f.frames[E];k.rect.width;const S=k.rect.height,N=new Uint8Array(S*k.bpl+S);k.cimg=c(k.img,S,k.bpp,k.bpl,N,u,j)}}function r(f,u,j,E,k){const S=k[0],N=k[1],A=k[2],s=k[3],l=k[4],P=k[5];let U=6,O=8,$=255;for(var W=0;W<f.length;W++){const oe=new Uint8Array(f[W]);for(var z=oe.length,L=0;L<z;L+=4)$&=oe[L+3]}const T=$!=255,B=function(X,G,re,se,ee,de){const te=[];for(var V=0;V<X.length;V++){const le=new Uint8Array(X[V]),he=new Uint32Array(le.buffer);var fe;let ue=0,be=0,xe=G,Fe=re,nt=se?1:0;if(V!=0){const ln=de||se||V==1||te[V-2].dispose!=0?1:2;let rt=0,ht=1e9;for(let ze=0;ze<ln;ze++){var Ne=new Uint8Array(X[V-1-ze]);const cn=new Uint32Array(X[V-1-ze]);let Ce=G,je=re,Oe=-1,He=-1;for(let Se=0;Se<re;Se++)for(let Ie=0;Ie<G;Ie++)he[ae=Se*G+Ie]!=cn[ae]&&(Ie<Ce&&(Ce=Ie),Ie>Oe&&(Oe=Ie),Se<je&&(je=Se),Se>He&&(He=Se));Oe==-1&&(Ce=je=Oe=He=0),ee&&((1&Ce)==1&&Ce--,(1&je)==1&&je--);const mt=(Oe-Ce+1)*(He-je+1);mt<ht&&(ht=mt,rt=ze,ue=Ce,be=je,xe=Oe-Ce+1,Fe=He-je+1)}Ne=new Uint8Array(X[V-1-rt]),rt==1&&(te[V-1].dispose=2),fe=new Uint8Array(xe*Fe*4),p(Ne,G,re,fe,xe,Fe,-ue,-be,0),nt=p(le,G,re,fe,xe,Fe,-ue,-be,3)?1:0,nt==1?n(le,G,re,fe,{x:ue,y:be,width:xe,height:Fe}):p(le,G,re,fe,xe,Fe,-ue,-be,0)}else fe=le.slice(0);te.push({rect:{x:ue,y:be,width:xe,height:Fe},img:fe,blend:nt,dispose:0})}if(se)for(V=0;V<te.length;V++){if((_e=te[V]).blend==1)continue;const le=_e.rect,he=te[V-1].rect,ue=Math.min(le.x,he.x),be=Math.min(le.y,he.y),xe={x:ue,y:be,width:Math.max(le.x+le.width,he.x+he.width)-ue,height:Math.max(le.y+le.height,he.y+he.height)-be};te[V-1].dispose=1,V-1!=0&&o(X,G,re,te,V-1,xe,ee),o(X,G,re,te,V,xe,ee)}let qe=0;if(X.length!=1)for(var ae=0;ae<te.length;ae++){var _e;qe+=(_e=te[ae]).rect.width*_e.rect.height}return te}(f,u,j,S,N,A),Z={},K=[],q=[];if(E!=0){const oe=[];for(L=0;L<B.length;L++)oe.push(B[L].img.buffer);const X=function(ee){let de=0;for(var te=0;te<ee.length;te++)de+=ee[te].byteLength;const V=new Uint8Array(de);let fe=0;for(te=0;te<ee.length;te++){const Ne=new Uint8Array(ee[te]),qe=Ne.length;for(let ae=0;ae<qe;ae+=4){let _e=Ne[ae],le=Ne[ae+1],he=Ne[ae+2];const ue=Ne[ae+3];ue==0&&(_e=le=he=0),V[fe+ae]=_e,V[fe+ae+1]=le,V[fe+ae+2]=he,V[fe+ae+3]=ue}fe+=qe}return V.buffer}(oe),G=_(X,E);for(L=0;L<G.plte.length;L++)K.push(G.plte[L].est.rgba);let re=0;for(L=0;L<B.length;L++){const se=(J=B[L]).img.length;var Q=new Uint8Array(G.inds.buffer,re>>2,se>>2);q.push(Q);const ee=new Uint8Array(G.abuf,re,se);P&&i(J.img,J.rect.width,J.rect.height,K,ee,Q),J.img.set(ee),re+=se}}else for(W=0;W<B.length;W++){var J=B[W];const oe=new Uint32Array(J.img.buffer);var ne=J.rect.width;for(z=oe.length,Q=new Uint8Array(z),q.push(Q),L=0;L<z;L++){const X=oe[L];if(L!=0&&X==oe[L-1])Q[L]=Q[L-1];else if(L>ne&&X==oe[L-ne])Q[L]=Q[L-ne];else{let G=Z[X];if(G==null&&(Z[X]=G=K.length,K.push(X),K.length>=300))break;Q[L]=G}}}const Ee=K.length;for(Ee<=256&&l==0&&(O=Ee<=2?1:Ee<=4?2:Ee<=16?4:8,O=Math.max(O,s)),W=0;W<B.length;W++){(J=B[W]).rect.x,J.rect.y,ne=J.rect.width;const oe=J.rect.height;let X=J.img;new Uint32Array(X.buffer);let G=4*ne,re=4;if(Ee<=256&&l==0){G=Math.ceil(O*ne/8);var ve=new Uint8Array(G*oe);const se=q[W];for(let ee=0;ee<oe;ee++){L=ee*G;const de=ee*ne;if(O==8)for(var Y=0;Y<ne;Y++)ve[L+Y]=se[de+Y];else if(O==4)for(Y=0;Y<ne;Y++)ve[L+(Y>>1)]|=se[de+Y]<<4-4*(1&Y);else if(O==2)for(Y=0;Y<ne;Y++)ve[L+(Y>>2)]|=se[de+Y]<<6-2*(3&Y);else if(O==1)for(Y=0;Y<ne;Y++)ve[L+(Y>>3)]|=se[de+Y]<<7-1*(7&Y)}X=ve,U=3,re=1}else if(T==0&&B.length==1){ve=new Uint8Array(ne*oe*3);const se=ne*oe;for(L=0;L<se;L++){const ee=3*L,de=4*L;ve[ee]=X[de],ve[ee+1]=X[de+1],ve[ee+2]=X[de+2]}X=ve,U=2,re=3,G=3*ne}J.img=X,J.bpl=G,J.bpp=re}return{ctype:U,depth:O,plte:K,frames:B}}function o(f,u,j,E,k,S,N){const A=Uint8Array,s=Uint32Array,l=new A(f[k-1]),P=new s(f[k-1]),U=k+1<f.length?new A(f[k+1]):null,O=new A(f[k]),$=new s(O.buffer);let W=u,z=j,L=-1,T=-1;for(let Z=0;Z<S.height;Z++)for(let K=0;K<S.width;K++){const q=S.x+K,Q=S.y+Z,J=Q*u+q,ne=$[J];ne==0||E[k-1].dispose==0&&P[J]==ne&&(U==null||U[4*J+3]!=0)||(q<W&&(W=q),q>L&&(L=q),Q<z&&(z=Q),Q>T&&(T=Q))}L==-1&&(W=z=L=T=0),N&&((1&W)==1&&W--,(1&z)==1&&z--),S={x:W,y:z,width:L-W+1,height:T-z+1};const B=E[k];B.rect=S,B.blend=1,B.img=new Uint8Array(S.width*S.height*4),E[k-1].dispose==0?(p(l,u,j,B.img,S.width,S.height,-S.x,-S.y,0),n(O,u,j,B.img,S)):p(O,u,j,B.img,S.width,S.height,-S.x,-S.y,0)}function n(f,u,j,E,k){p(f,u,j,E,k.width,k.height,-k.x,-k.y,2)}function c(f,u,j,E,k,S,N){const A=[];let s,l=[0,1,2,3,4];S!=-1?l=[S]:(u*E>5e5||j==1)&&(l=[0]),N&&(s={level:0});const P=dr;for(var U=0;U<l.length;U++){for(let W=0;W<u;W++)h(k,f,W,E,j,l[U]);A.push(P.deflate(k,s))}let O,$=1e9;for(U=0;U<A.length;U++)A[U].length<$&&(O=U,$=A[U].length);return A[O]}function h(f,u,j,E,k,S){const N=j*E;let A=N+j;if(f[A]=S,A++,S==0)if(E<500)for(var s=0;s<E;s++)f[A+s]=u[N+s];else f.set(new Uint8Array(u.buffer,N,E),A);else if(S==1){for(s=0;s<k;s++)f[A+s]=u[N+s];for(s=k;s<E;s++)f[A+s]=u[N+s]-u[N+s-k]+256&255}else if(j==0){for(s=0;s<k;s++)f[A+s]=u[N+s];if(S==2)for(s=k;s<E;s++)f[A+s]=u[N+s];if(S==3)for(s=k;s<E;s++)f[A+s]=u[N+s]-(u[N+s-k]>>1)+256&255;if(S==4)for(s=k;s<E;s++)f[A+s]=u[N+s]-C(u[N+s-k],0,0)+256&255}else{if(S==2)for(s=0;s<E;s++)f[A+s]=u[N+s]+256-u[N+s-E]&255;if(S==3){for(s=0;s<k;s++)f[A+s]=u[N+s]+256-(u[N+s-E]>>1)&255;for(s=k;s<E;s++)f[A+s]=u[N+s]+256-(u[N+s-E]+u[N+s-k]>>1)&255}if(S==4){for(s=0;s<k;s++)f[A+s]=u[N+s]+256-C(0,u[N+s-E],0)&255;for(s=k;s<E;s++)f[A+s]=u[N+s]+256-C(u[N+s-k],u[N+s-E],u[N+s-k-E])&255}}}function _(f,u){const j=new Uint8Array(f),E=j.slice(0),k=new Uint32Array(E.buffer),S=R(E,u),N=S[0],A=S[1],s=j.length,l=new Uint8Array(s>>2);let P;if(j.length<2e7)for(var U=0;U<s;U+=4)P=y(N,O=j[U]*(1/255),$=j[U+1]*(1/255),W=j[U+2]*(1/255),z=j[U+3]*(1/255)),l[U>>2]=P.ind,k[U>>2]=P.est.rgba;else for(U=0;U<s;U+=4){var O=j[U]*.00392156862745098,$=j[U+1]*(1/255),W=j[U+2]*(1/255),z=j[U+3]*(1/255);for(P=N;P.left;)P=M(P.est,O,$,W,z)<=0?P.left:P.right;l[U>>2]=P.ind,k[U>>2]=P.est.rgba}return{abuf:E.buffer,inds:l,plte:A}}function R(f,u,j){j==null&&(j=1e-4);const E=new Uint32Array(f.buffer),k={i0:0,i1:f.length,bst:null,est:null,tdst:0,left:null,right:null};k.bst=I(f,k.i0,k.i1),k.est=g(k.bst);const S=[k];for(;S.length<u;){let A=0,s=0;for(var N=0;N<S.length;N++)S[N].est.L>A&&(A=S[N].est.L,s=N);if(A<j)break;const l=S[s],P=F(f,E,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=P||l.i1<=P){l.est.L=0;continue}const U={i0:l.i0,i1:P,bst:null,est:null,tdst:0,left:null,right:null};U.bst=I(f,U.i0,U.i1),U.est=g(U.bst);const O={i0:P,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};for(O.bst={R:[],m:[],N:l.bst.N-U.bst.N},N=0;N<16;N++)O.bst.R[N]=l.bst.R[N]-U.bst.R[N];for(N=0;N<4;N++)O.bst.m[N]=l.bst.m[N]-U.bst.m[N];O.est=g(O.bst),l.left=U,l.right=O,S[s]=U,S.push(O)}for(S.sort((A,s)=>s.bst.N-A.bst.N),N=0;N<S.length;N++)S[N].ind=N;return[k,S]}function y(f,u,j,E,k){if(f.left==null)return f.tdst=function(U,O,$,W,z){const L=O-U[0],T=$-U[1],B=W-U[2],Z=z-U[3];return L*L+T*T+B*B+Z*Z}(f.est.q,u,j,E,k),f;const S=M(f.est,u,j,E,k);let N=f.left,A=f.right;S>0&&(N=f.right,A=f.left);const s=y(N,u,j,E,k);if(s.tdst<=S*S)return s;const l=y(A,u,j,E,k);return l.tdst<s.tdst?l:s}function M(f,u,j,E,k){const{e:S}=f;return S[0]*u+S[1]*j+S[2]*E+S[3]*k-f.eMq}function F(f,u,j,E,k,S){for(E-=4;j<E;){for(;w(f,j,k)<=S;)j+=4;for(;w(f,E,k)>S;)E-=4;if(j>=E)break;const N=u[j>>2];u[j>>2]=u[E>>2],u[E>>2]=N,j+=4,E-=4}for(;w(f,j,k)>S;)j-=4;return j+4}function w(f,u,j){return f[u]*j[0]+f[u+1]*j[1]+f[u+2]*j[2]+f[u+3]*j[3]}function I(f,u,j){const E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0],S=j-u>>2;for(let N=u;N<j;N+=4){const A=f[N]*.00392156862745098,s=f[N+1]*(1/255),l=f[N+2]*(1/255),P=f[N+3]*(1/255);k[0]+=A,k[1]+=s,k[2]+=l,k[3]+=P,E[0]+=A*A,E[1]+=A*s,E[2]+=A*l,E[3]+=A*P,E[5]+=s*s,E[6]+=s*l,E[7]+=s*P,E[10]+=l*l,E[11]+=l*P,E[15]+=P*P}return E[4]=E[1],E[8]=E[2],E[9]=E[6],E[12]=E[3],E[13]=E[7],E[14]=E[11],{R:E,m:k,N:S}}function g(f){const{R:u}=f,{m:j}=f,{N:E}=f,k=j[0],S=j[1],N=j[2],A=j[3],s=E==0?0:1/E,l=[u[0]-k*k*s,u[1]-k*S*s,u[2]-k*N*s,u[3]-k*A*s,u[4]-S*k*s,u[5]-S*S*s,u[6]-S*N*s,u[7]-S*A*s,u[8]-N*k*s,u[9]-N*S*s,u[10]-N*N*s,u[11]-N*A*s,u[12]-A*k*s,u[13]-A*S*s,u[14]-A*N*s,u[15]-A*A*s],P=l,U=D;let O=[Math.random(),Math.random(),Math.random(),Math.random()],$=0,W=0;if(E!=0)for(let L=0;L<16&&(O=U.multVec(P,O),W=Math.sqrt(U.dot(O,O)),O=U.sml(1/W,O),!(L!=0&&Math.abs(W-$)<1e-9));L++)$=W;const z=[k*s,S*s,N*s,A*s];return{Cov:l,q:z,e:O,L:$,eMq255:U.dot(U.sml(255,z),O),eMq:U.dot(O,z),rgba:(Math.round(255*z[3])<<24|Math.round(255*z[2])<<16|Math.round(255*z[1])<<8|Math.round(255*z[0])<<0)>>>0}}var D={multVec:(f,u)=>[f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3],f[4]*u[0]+f[5]*u[1]+f[6]*u[2]+f[7]*u[3],f[8]*u[0]+f[9]*u[1]+f[10]*u[2]+f[11]*u[3],f[12]*u[0]+f[13]*u[1]+f[14]*u[2]+f[15]*u[3]],dot:(f,u)=>f[0]*u[0]+f[1]*u[1]+f[2]*u[2]+f[3]*u[3],sml:(f,u)=>[f*u[0],f*u[1],f*u[2],f*u[3]]};pe.encode=function(u,j,E,k,S,N,A){k==null&&(k=0),A==null&&(A=!1);const s=r(u,j,E,k,[!1,!1,!1,0,A,!1]);return x(s,-1),m(s,j,E,S,N)},pe.encodeLL=function(u,j,E,k,S,N,A,s){const l={ctype:0+(k==1?0:2)+(S==0?0:4),depth:N,frames:[]},P=(k+S)*N,U=P*j;for(let O=0;O<u.length;O++)l.frames.push({rect:{x:0,y:0,width:j,height:E},img:new Uint8Array(u[O]),blend:0,dispose:1,bpp:Math.ceil(P/8),bpl:Math.ceil(U/8)});return x(l,0,!0),m(l,j,E,A,s)},pe.encode.compress=r,pe.encode.dither=i,pe.quantize=_,pe.quantize.getKDtree=R,pe.quantize.getNearest=y})();const Xt={toArrayBuffer(p,v){const C=p.width,a=p.height,e=C<<2,t=p.getContext("2d").getImageData(0,0,C,a),d=new Uint32Array(t.data.buffer),i=(32*C+31)/32<<2,m=i*a,x=122+m,r=new ArrayBuffer(x),o=new DataView(r),n=1<<20;let c,h,_,R,y=n,M=0,F=0,w=0;function I(f){o.setUint16(F,f,!0),F+=2}function g(f){o.setUint32(F,f,!0),F+=4}function D(f){F+=f}I(19778),g(x),D(4),g(122),g(108),g(C),g(-a>>>0),I(1),I(32),g(3),g(m),g(2835),g(2835),D(8),g(16711680),g(65280),g(255),g(4278190080),g(1466527264),function f(){for(;M<a&&y>0;){for(R=122+M*i,c=0;c<e;)y--,h=d[w++],_=h>>>24,o.setUint32(R+c,h<<8|_),c+=4;M++}w<d.length?(y=n,setTimeout(f,Xt._dly)):v(r)}()},toBlob(p,v){this.toArrayBuffer(p,C=>{v(new Blob([C],{type:"image/bmp"}))})},_dly:9};var ce={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},fr={[ce.CHROME]:16384,[ce.FIREFOX]:11180,[ce.DESKTOP_SAFARI]:16384,[ce.IE]:8192,[ce.IOS]:4096,[ce.ETC]:8192};const ft=typeof window<"u",Yt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ze=ft&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),ur=(ft||Yt)&&(Ze&&Ze.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Jt=(ft||Yt)&&(Ze&&Ze.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function ut(p,v,C=Date.now()){return new Promise(a=>{const e=p.split(","),t=e[0].match(/:(.*?);/)[1],d=globalThis.atob(e[1]);let i=d.length;const m=new Uint8Array(i);for(;i--;)m[i]=d.charCodeAt(i);const x=new Blob([m],{type:t});x.name=v,x.lastModified=C,a(x)})}function en(p){return new Promise((v,C)=>{const a=new Jt;a.onload=()=>v(a.result),a.onerror=e=>C(e),a.readAsDataURL(p)})}function tn(p){return new Promise((v,C)=>{const a=new Image;a.onload=()=>v(a),a.onerror=e=>C(e),a.src=p})}function Re(){if(Re.cachedResult!==void 0)return Re.cachedResult;let p=ce.ETC;const{userAgent:v}=navigator;return/Chrom(e|ium)/i.test(v)?p=ce.CHROME:/iP(ad|od|hone)/i.test(v)&&/WebKit/i.test(v)?p=ce.IOS:/Safari/i.test(v)?p=ce.DESKTOP_SAFARI:/Firefox/i.test(v)?p=ce.FIREFOX:(/MSIE/i.test(v)||document.documentMode)&&(p=ce.IE),Re.cachedResult=p,Re.cachedResult}function nn(p,v){const C=Re(),a=fr[C];let e=p,t=v,d=e*t;const i=e>t?t/e:e/t;for(;d>a*a;){const m=(a+e)/2,x=(a+t)/2;m<x?(t=x,e=x*i):(t=m*i,e=m),d=e*t}return{width:e,height:t}}function tt(p,v){let C,a;try{if(C=new OffscreenCanvas(p,v),a=C.getContext("2d"),a===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{C=document.createElement("canvas"),a=C.getContext("2d")}return C.width=p,C.height=v,[C,a]}function rn(p,v){const{width:C,height:a}=nn(p.width,p.height),[e,t]=tt(C,a);return v&&/jpe?g/.test(v)&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height)),t.drawImage(p,0,0,e.width,e.height),e}function Qe(){return Qe.cachedResult!==void 0||(Qe.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Qe.cachedResult}function Xe(p,v={}){return new Promise(function(C,a){let e,t;var d=function(){try{return t=rn(e,v.fileType||p.type),C([e,t])}catch(m){return a(m)}},i=function(m){try{var x=function(r){try{throw r}catch(o){return a(o)}};try{let r;return en(p).then(function(o){try{return r=o,tn(r).then(function(n){try{return e=n,function(){try{return d()}catch(c){return a(c)}}()}catch(c){return x(c)}},x)}catch(n){return x(n)}},x)}catch(r){x(r)}}catch(r){return a(r)}};try{if(Qe()||[ce.DESKTOP_SAFARI,ce.MOBILE_SAFARI].includes(Re()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(p).then(function(m){try{return e=m,d()}catch{return i()}},i)}catch{i()}})}function Ye(p,v,C,a,e=1){return new Promise(function(t,d){let i;if(v==="image/png"){let x,r,o;return x=p.getContext("2d"),{data:r}=x.getImageData(0,0,p.width,p.height),o=pe.encode([r.buffer],p.width,p.height,4096*e),i=new Blob([o],{type:v}),i.name=C,i.lastModified=a,m.call(this)}{let x=function(){return m.call(this)};if(v==="image/bmp")return new Promise(r=>Xt.toBlob(p,r)).then(function(r){try{return i=r,i.name=C,i.lastModified=a,x.call(this)}catch(o){return d(o)}}.bind(this),d);{let r=function(){return x.call(this)};if(typeof OffscreenCanvas=="function"&&p instanceof OffscreenCanvas)return p.convertToBlob({type:v,quality:e}).then(function(o){try{return i=o,i.name=C,i.lastModified=a,r.call(this)}catch(n){return d(n)}}.bind(this),d);{let o;return o=p.toDataURL(v,e),ut(o,C,a).then(function(n){try{return i=n,r.call(this)}catch(c){return d(c)}}.bind(this),d)}}}function m(){return t(i)}})}function ye(p){p.width=0,p.height=0}function Le(){return new Promise(function(p,v){let C,a,e,t;return Le.cachedResult!==void 0?p(Le.cachedResult):ut("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(d){try{return C=d,Xe(C).then(function(i){try{return a=i[1],Ye(a,C.type,C.name,C.lastModified).then(function(m){try{return e=m,ye(a),Xe(e).then(function(x){try{return t=x[0],Le.cachedResult=t.width===1&&t.height===2,p(Le.cachedResult)}catch(r){return v(r)}},v)}catch(x){return v(x)}},v)}catch(m){return v(m)}},v)}catch(i){return v(i)}},v)})}function on(p){return new Promise((v,C)=>{const a=new Jt;a.onload=e=>{const t=new DataView(e.target.result);if(t.getUint16(0,!1)!=65496)return v(-2);const d=t.byteLength;let i=2;for(;i<d;){if(t.getUint16(i+2,!1)<=8)return v(-1);const m=t.getUint16(i,!1);if(i+=2,m==65505){if(t.getUint32(i+=2,!1)!=1165519206)return v(-1);const x=t.getUint16(i+=6,!1)==18761;i+=t.getUint32(i+4,x);const r=t.getUint16(i,x);i+=2;for(let o=0;o<r;o++)if(t.getUint16(i+12*o,x)==274)return v(t.getUint16(i+12*o+8,x))}else{if((65280&m)!=65280)break;i+=t.getUint16(i,!1)}}return v(-1)},a.onerror=e=>C(e),a.readAsArrayBuffer(p)})}function an(p,v){const{width:C}=p,{height:a}=p,{maxWidthOrHeight:e}=v;let t,d=p;return isFinite(e)&&(C>e||a>e)&&([d,t]=tt(C,a),C>a?(d.width=e,d.height=a/C*e):(d.width=C/a*e,d.height=e),t.drawImage(p,0,0,d.width,d.height),ye(p)),d}function sn(p,v){const{width:C}=p,{height:a}=p,[e,t]=tt(C,a);switch(v>4&&v<9?(e.width=a,e.height=C):(e.width=C,e.height=a),v){case 2:t.transform(-1,0,0,1,C,0);break;case 3:t.transform(-1,0,0,-1,C,a);break;case 4:t.transform(1,0,0,-1,0,a);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,a,0);break;case 7:t.transform(0,-1,-1,0,a,C);break;case 8:t.transform(0,-1,1,0,0,C)}return t.drawImage(p,0,0,C,a),ye(p),e}function jt(p,v,C=0){return new Promise(function(a,e){let t,d,i,m,x,r,o,n,c,h,_,R,y,M,F,w,I,g,D,f;function u(E=5){if(v.signal&&v.signal.aborted)throw v.signal.reason;t+=E,v.onProgress(Math.min(t,100))}function j(E){if(v.signal&&v.signal.aborted)throw v.signal.reason;t=Math.min(Math.max(E,t),100),v.onProgress(t)}return t=C,d=v.maxIteration||10,i=1024*v.maxSizeMB*1024,u(),Xe(p,v).then(function(E){try{return[,m]=E,u(),x=an(m,v),u(),new Promise(function(k,S){var N;if(!(N=v.exifOrientation))return on(p).then(function(s){try{return N=s,A.call(this)}catch(l){return S(l)}}.bind(this),S);function A(){return k(N)}return A.call(this)}).then(function(k){try{return r=k,u(),Le().then(function(S){try{return o=S?x:sn(x,r),u(),n=v.initialQuality||1,c=v.fileType||p.type,Ye(o,c,p.name,p.lastModified,n).then(function(N){try{{let s=function(){if(d--&&(F>i||F>y)){let P,U;return P=f?.95*D.width:D.width,U=f?.95*D.height:D.height,[I,g]=tt(P,U),g.drawImage(D,0,0,P,U),n*=c==="image/png"?.85:.95,Ye(I,c,p.name,p.lastModified,n).then(function(O){try{return w=O,ye(D),D=I,F=w.size,j(Math.min(99,Math.floor((M-F)/(M-i)*100))),s}catch($){return e($)}},e)}return[1]},l=function(){return ye(D),ye(I),ye(x),ye(o),ye(m),j(100),a(w)};if(h=N,u(),_=h.size>i,R=h.size>p.size,!_&&!R)return j(100),a(h);var A;return y=p.size,M=h.size,F=M,D=o,f=!v.alwaysKeepResolution&&_,(A=function(P){for(;P;){if(P.then)return void P.then(A,e);try{if(P.pop){if(P.length)return P.pop()?l.call(this):P;P=s}else P=P.call(this)}catch(U){return e(U)}}}.bind(this))(s)}}catch(s){return e(s)}}.bind(this),e)}catch(N){return e(N)}}.bind(this),e)}catch(S){return e(S)}}.bind(this),e)}catch(k){return e(k)}}.bind(this),e)})}const hr=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let at;function mr(p,v){return new Promise((C,a)=>{at||(at=function(d){const i=[];return i.push(d),URL.createObjectURL(new Blob(i))}(hr));const e=new Worker(at);e.addEventListener("message",function(d){if(v.signal&&v.signal.aborted)e.terminate();else if(d.data.progress===void 0){if(d.data.error)return a(new Error(d.data.error)),void e.terminate();C(d.data.file),e.terminate()}else v.onProgress(d.data.progress)}),e.addEventListener("error",a),v.signal&&v.signal.addEventListener("abort",()=>{a(v.signal.reason),e.terminate()}),e.postMessage({file:p,imageCompressionLibUrl:v.libURL,options:{...v,onProgress:void 0,signal:void 0}})})}function ie(p,v){return new Promise(function(C,a){let e,t,d,i,m,x;if(e={...v},d=0,{onProgress:i}=e,e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,m=typeof e.useWebWorker!="boolean"||e.useWebWorker,delete e.useWebWorker,e.onProgress=c=>{d=c,typeof i=="function"&&i(d)},!(p instanceof Blob||p instanceof ur))return a(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(p.type))return a(new Error("The file given is not an image"));if(x=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!m||typeof Worker!="function"||x)return jt(p,e).then(function(c){try{return t=c,n.call(this)}catch(h){return a(h)}}.bind(this),a);var r=function(){try{return n.call(this)}catch(c){return a(c)}}.bind(this),o=function(c){try{return jt(p,e).then(function(h){try{return t=h,r()}catch(_){return a(_)}},a)}catch(h){return a(h)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",mr(p,e).then(function(c){try{return t=c,r()}catch{return o()}},o)}catch{o()}function n(){try{t.name=p.name,t.lastModified=p.lastModified}catch{}try{e.preserveExif&&p.type==="image/jpeg"&&(!e.fileType||e.fileType&&e.fileType===p.type)&&(t=Zt(p,t))}catch{}return C(t)}})}ie.getDataUrlFromFile=en,ie.getFilefromDataUrl=ut,ie.loadImage=tn,ie.drawImageInCanvas=rn,ie.drawFileInCanvas=Xe,ie.canvasToFile=Ye,ie.getExifOrientation=on,ie.handleMaxWidthOrHeight=an,ie.followExifOrientation=sn,ie.cleanupCanvasMemory=ye,ie.isAutoOrientationInBrowser=Le,ie.approximateBelowMaximumCanvasSizeOfBrowser=nn,ie.copyExifWithoutOrientation=Zt,ie.getBrowserName=Re,ie.version="2.0.2";const pr=["Family","Church","Cooking","Travel","Classmates","Worklife","4H Club"];function gr({onSubmit:p}){const[v,C]=H.useState(""),[a,e]=H.useState(""),[t,d]=H.useState(""),[i,m]=H.useState(""),[x,r]=H.useState(""),[o,n]=H.useState(""),[c,h]=H.useState([]),[_,R]=H.useState(""),[y,M]=H.useState(null),[F,w]=H.useState({}),[I,g]=H.useState(!1),[D,f]=H.useState(""),u=async A=>{const s=A.target.files?.[0];if(s){if(!s.type.startsWith("image/")){w({...F,photo:"Please select an image file"});return}if(console.log(" Original image:",{name:s.name,size:(s.size/1024/1024).toFixed(2)+" MB",type:s.type}),s.size<=1*1024*1024){console.log(" Image is small enough, no compression needed");const l=new FileReader;l.onloadend=()=>{R(l.result)},l.readAsDataURL(s),M(s),w({...F,photo:""});return}try{f("Compressing image...");const l={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg"};console.log(" Compressing image...");const P=await ie(s,l);console.log(" Compressed image:",{name:P.name,size:(P.size/1024/1024).toFixed(2)+" MB",type:P.type,reduction:((1-P.size/s.size)*100).toFixed(1)+"%"});const U=new FileReader;U.onloadend=()=>{R(U.result)},U.readAsDataURL(P),M(P),w({...F,photo:""}),f("")}catch(l){console.error(" Compression error:",l),w({...F,photo:"Failed to process image"}),f("")}}},j=A=>{const s=A.target.files?.[0];if(s){if(s.size>10*1024*1024){w({...F,video:"Video must be less than 10MB. Please compress your video first."});return}console.log(" Video selected:",{name:s.name,size:(s.size/1024/1024).toFixed(2)+" MB",type:s.type}),M(s),w({...F,video:""})}},E=A=>{h(s=>s.includes(A)?s.filter(l=>l!==A):[...s,A])},k=A=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A),S=()=>{const A={};return v.trim()||(A.headline="Headline is required"),a.trim()||(A.name="Name is required"),t.trim()?k(t)||(A.email="Please enter a valid email address"):A.email="Email is required",i.trim()||(A.memory="Memory is required"),w(A),Object.keys(A).length===0},N=async A=>{if(A.preventDefault(),!!S()){g(!0),w({});try{const s=new FormData;s.append("headline",v.trim()),s.append("name",a.trim()),s.append("email",t.trim()),s.append("memory",i.trim()),x.trim()&&s.append("memoryDate",x.trim()),o.trim()&&s.append("location",o.trim()),s.append("tags",JSON.stringify(c)),y&&(console.log(" Uploading file:",{name:y.name,size:(y.size/1024/1024).toFixed(2)+" MB",type:y.type}),s.append("media",y)),await p(s),C(""),e(""),d(""),m(""),r(""),n(""),h([]),M(null),R("")}catch(s){console.error(" Submit error:",s),w({submit:s instanceof Error?s.message:"Failed to submit memory"})}finally{g(!1)}}};return b.jsx("form",{onSubmit:N,className:"w-full",children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"headline",className:"text-sm font-medium",children:"Headline *"}),b.jsx(Ue,{id:"headline",value:v,onChange:A=>C(A.target.value),placeholder:"Give your memory a memorable title",className:F.headline?"border-destructive":"",disabled:I}),F.headline&&b.jsx("p",{className:"text-xs text-destructive",children:F.headline})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"name",className:"text-sm font-medium",children:"Your Name *"}),b.jsx(Ue,{id:"name",value:a,onChange:A=>e(A.target.value),placeholder:"Enter your name",className:F.name?"border-destructive":"",disabled:I}),F.name&&b.jsx("p",{className:"text-xs text-destructive",children:F.name})]}),b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"email",className:"text-sm font-medium",children:"Your Email *"}),b.jsx(Ue,{id:"email",type:"email",value:t,onChange:A=>d(A.target.value),placeholder:"your.email@example.com",className:F.email?"border-destructive":"",disabled:I}),F.email&&b.jsx("p",{className:"text-xs text-destructive",children:F.email})]})]}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"memoryDate",className:"text-sm font-medium",children:"When (Optional)"}),b.jsx(Ue,{id:"memoryDate",value:x,onChange:A=>r(A.target.value),placeholder:"e.g., June 2015",disabled:I})]}),b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"memoryLocation",className:"text-sm font-medium",children:"Where (Optional)"}),b.jsx(Ue,{id:"memoryLocation",value:o,onChange:A=>n(A.target.value),placeholder:"e.g., Grandma's house",disabled:I})]})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(me,{className:"text-sm font-medium",children:"Upload Media (Optional)"}),b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"photo",className:"cursor-pointer block",children:b.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 hover:border-primary transition-colors text-center min-h-[160px] flex items-center justify-center",children:_&&y?.type.startsWith("image/")?b.jsxs("div",{className:"relative w-full",children:[b.jsx("img",{src:_,alt:"Preview",className:"w-full h-36 object-cover rounded"}),!I&&b.jsx(Ae,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-7 w-7",onClick:A=>{A.preventDefault(),A.stopPropagation(),M(null),R("")},children:b.jsx(it,{className:"h-4 w-4"})})]}):b.jsxs("div",{className:"py-3",children:[b.jsx(bt,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),b.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Photo"}),b.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Auto-compressed to ~1MB"})]})})}),b.jsx(Ue,{id:"photo",type:"file",accept:"image/*",onChange:u,className:"hidden",disabled:I}),D&&b.jsx("p",{className:"text-xs text-muted-foreground text-center",children:D})]}),b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"video",className:"cursor-pointer block",children:b.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 hover:border-primary transition-colors text-center min-h-[160px] flex items-center justify-center",children:y?.type.startsWith("video/")?b.jsxs("div",{className:"relative w-full",children:[b.jsx("div",{className:"w-full h-36 flex items-center justify-center bg-muted rounded",children:b.jsx("div",{className:"text-center px-3",children:b.jsx("p",{className:"text-sm font-medium text-muted-foreground break-all",children:y.name})})}),!I&&b.jsx(Ae,{type:"button",variant:"destructive",size:"icon",className:"absolute top-2 right-2 h-7 w-7",onClick:A=>{A.preventDefault(),A.stopPropagation(),M(null)},children:b.jsx(it,{className:"h-4 w-4"})})]}):b.jsxs("div",{className:"py-3",children:[b.jsx(bt,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),b.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Video"}),b.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Max 10MB"})]})})}),b.jsx(Ue,{id:"video",type:"file",accept:"video/*",onChange:j,className:"hidden",disabled:I})]})]}),F.photo&&b.jsx("p",{className:"text-xs text-destructive",children:F.photo}),F.video&&b.jsx("p",{className:"text-xs text-destructive",children:F.video})]}),b.jsxs("div",{className:"space-y-1.5",children:[b.jsx(me,{htmlFor:"memory",className:"text-sm font-medium",children:"Your Memory *"}),b.jsx(wn,{id:"memory",value:i,onChange:A=>m(A.target.value),placeholder:"Share your memory and story here...",rows:12,className:F.memory?"border-destructive":"",disabled:I}),F.memory&&b.jsx("p",{className:"text-xs text-destructive",children:F.memory})]}),b.jsxs("div",{className:"space-y-2",children:[b.jsx(me,{className:"text-sm font-medium",children:"Tags (Optional)"}),b.jsx("div",{className:"flex flex-wrap gap-3",children:pr.map(A=>b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(ir,{id:A,checked:c.includes(A),onCheckedChange:()=>E(A),disabled:I}),b.jsx(me,{htmlFor:A,className:"text-sm font-normal cursor-pointer",children:A})]},A))})]}),F.submit&&b.jsx("div",{className:"p-3 bg-destructive/10 border border-destructive rounded-md",children:b.jsx("p",{className:"text-xs text-destructive",children:F.submit})}),I&&b.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-muted rounded-md",children:[b.jsx(xt,{className:"h-4 w-4 animate-spin"}),b.jsx("p",{className:"text-xs text-muted-foreground",children:"Uploading memory..."})]}),b.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t",children:b.jsx(Ae,{type:"submit",disabled:I,className:"w-full sm:w-auto min-w-[120px]",children:I?b.jsxs(b.Fragment,{children:[b.jsx(xt,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):"Share Memory"})})]})})}function vr(){if(typeof window>"u")return"";let p=localStorage.getItem("sessionId");return p||(p=crypto.randomUUID(),localStorage.setItem("sessionId",p)),p}function kr(){const[p,v]=H.useState([]),[C,a]=H.useState(null),[e,t]=H.useState(!1),[d,i]=H.useState(!0),[m,x]=H.useState(new Set),[r,o]=H.useState(""),[n,c]=H.useState("");H.useEffect(()=>{if(h(),typeof window<"u"){const M=localStorage.getItem("likedMemories");if(M)try{x(new Set(JSON.parse(M)))}catch(F){console.error("Failed to parse liked memories:",F)}}},[]);const h=async()=>{console.log(" [MemoryWall] Fetching memories..."),c("");try{const M=await fetch(`${we}/api/memories`);if(console.log(" [MemoryWall] Response status:",M.status),!M.ok){const I=await M.json().catch(()=>null);throw new Error(I?.details||I?.error||`Failed to fetch memories: ${M.status}`)}const F=await M.json();console.log(" [MemoryWall] Raw data received:",F.length,"items");const w=F.map(I=>{const g=I.mediaType==="photo"&&I.mediaKey?`${we}/api/media/${I.mediaKey}`:void 0,D=I.mediaType==="video"&&I.mediaKey?`${we}/api/media/${I.mediaKey}`:void 0;return console.log(` [MemoryWall] Memory ${I.id}:`,{headline:I.headline,mediaType:I.mediaType,mediaKey:I.mediaKey,photoUrl:g,videoUrl:D}),{id:I.id,headline:I.headline,name:I.name,email:I.email,photo:g,video:D,memory:I.memory,memoryDate:I.memoryDate,memoryLocation:I.location,tags:I.tags,likes:I.likes,createdAt:I.createdAt}});console.log(" [MemoryWall] Formatted memories:",w.length,"items"),v(Array.isArray(w)?w:[])}catch(M){console.error(" [MemoryWall] Failed to fetch memories:",M),c(M instanceof Error?M.message:"Failed to load memories")}finally{i(!1)}},_=async M=>{if(console.log(" [MemoryWall] Like clicked for memory:",M),m.has(M)){console.log(" [MemoryWall] Memory already liked");return}try{const F=await fetch(`${we}/api/memories/${M}/like`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:vr()})});if(!F.ok)throw new Error("Failed to like memory");const w=await F.json();console.log(" [MemoryWall] Like successful:",w),v(g=>g.map(D=>D.id===M?{...D,likes:w.likes||D.likes+1,photo:w.mediaType==="photo"&&w.mediaKey?`${we}/api/media/${w.mediaKey}`:D.photo,video:w.mediaType==="video"&&w.mediaKey?`${we}/api/media/${w.mediaKey}`:D.video}:D));const I=new Set(m);I.add(M),x(I),typeof window<"u"&&localStorage.setItem("likedMemories",JSON.stringify(Array.from(I)))}catch(F){console.error(" [MemoryWall] Failed to like memory:",F)}},R=async M=>{if(console.log(" [MemoryWall] Share clicked for memory:",M.id),navigator.share)try{await navigator.share({title:M.headline,text:M.memory,url:window.location.href})}catch{console.log("Share cancelled")}else await navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")},y=async M=>{console.log(" [MemoryWall] Submitting new memory..."),console.log(" [MemoryWall] FormData keys:",Array.from(M.keys())),o("");try{const F=await fetch(`${we}/api/memories`,{method:"POST",body:M});if(console.log(" [MemoryWall] Submit response status:",F.status),!F.ok){const g=await F.json().catch(()=>null);throw console.error(" [MemoryWall] Submit failed:",g),new Error(g?.details||g?.error||"Failed to submit memory")}const w=await F.json();console.log(" [MemoryWall] Memory created:",w),console.log("  mediaKey:",w.mediaKey),console.log("  mediaType:",w.mediaType);const I={id:w.id,headline:w.headline,name:w.name,email:w.email,photo:w.mediaType==="photo"&&w.mediaKey?`${we}/api/media/${w.mediaKey}`:void 0,video:w.mediaType==="video"&&w.mediaKey?`${we}/api/media/${w.mediaKey}`:void 0,memory:w.memory,memoryDate:w.memoryDate,memoryLocation:w.location,tags:w.tags,likes:0,createdAt:w.createdAt};console.log(" [MemoryWall] Formatted memory with URLs:",{id:I.id,photo:I.photo,video:I.video}),v(g=>[I,...g]),t(!1)}catch(F){throw console.error(" [MemoryWall] Failed to submit memory:",F),o(F instanceof Error?F.message:"Failed to submit memory"),F}};return d?b.jsx("div",{className:"py-16 bg-background",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsx("div",{className:"text-center",children:"Loading memories..."})})}):n?b.jsx("div",{className:"py-16 bg-background",children:b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"text-center text-destructive",children:[b.jsx(vt,{className:"w-8 h-8 mx-auto mb-2"}),b.jsx("p",{children:n}),b.jsx(Ae,{onClick:h,className:"mt-4",children:"Try Again"})]})})}):b.jsx("div",{className:"py-16 bg-background",children:b.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"text-center mb-12",children:[b.jsx("h2",{className:"text-4xl font-heading text-foreground mb-4",children:"Memory Wall"}),b.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"Share your favorite memories and moments"}),b.jsxs(Ae,{onClick:()=>t(!0),size:"lg",className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:[b.jsx(Fn,{className:"w-5 h-5 mr-2"}),"Add Memory"]})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(M=>{const F=M.photo||M.video;return console.log(` [MemoryWall] Rendering memory ${M.id}:`,{hasMedia:F,photo:M.photo,video:M.video}),b.jsxs(An,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:[b.jsxs("div",{className:"relative aspect-square bg-muted cursor-pointer",onClick:()=>a(M),children:[M.photo&&b.jsx(b.Fragment,{children:b.jsx("img",{src:M.photo,alt:M.headline,className:"w-full h-full object-cover",onLoad:()=>console.log(" [MemoryWall] Image loaded:",M.photo),onError:w=>{console.error(" [MemoryWall] Image failed to load:",M.photo),console.error("  Error event:",w)}})}),M.video&&b.jsxs("div",{className:"relative w-full h-full",children:[b.jsx("video",{src:M.video,className:"w-full h-full object-cover",onLoadedData:()=>console.log(" [MemoryWall] Video loaded:",M.video),onError:w=>{console.error(" [MemoryWall] Video failed to load:",M.video),console.error("  Error event:",w)}}),b.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30",children:b.jsx(En,{className:"w-16 h-16 text-white"})})]}),!F&&b.jsx("div",{className:"w-full h-full flex items-center justify-center",children:b.jsx("p",{className:"text-muted-foreground",children:"No media"})})]}),b.jsxs(Nn,{className:"p-4",children:[b.jsx("h3",{className:"font-heading text-xl mb-2",children:M.headline}),b.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["by ",M.name]}),b.jsx("p",{className:"text-sm line-clamp-3",children:M.memory})]}),b.jsxs(Cn,{className:"p-4 pt-0 flex justify-between items-center",children:[b.jsxs(Ae,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),_(M.id)},disabled:m.has(M.id),className:m.has(M.id)?"text-destructive":"",children:[b.jsx(gt,{className:`w-4 h-4 mr-1 ${m.has(M.id)?"fill-current":""}`}),M.likes]}),b.jsxs(Ae,{variant:"ghost",size:"sm",onClick:w=>{w.stopPropagation(),R(M)},children:[b.jsx(yt,{className:"w-4 h-4 mr-1"}),"Share"]})]})]},M.id)})}),b.jsx(wt,{open:!!C,onOpenChange:()=>a(null),children:b.jsx(At,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:C&&b.jsxs(b.Fragment,{children:[b.jsx(Nt,{children:b.jsx(Ct,{className:"font-heading text-2xl",children:C.headline})}),b.jsxs("div",{className:"space-y-4",children:[C.photo&&b.jsx("img",{src:C.photo,alt:C.headline,className:"w-full rounded-lg"}),C.video&&b.jsx("video",{src:C.video,controls:!0,className:"w-full rounded-lg"}),b.jsxs("div",{children:[b.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["by ",C.name]}),C.memoryDate&&b.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:new Date(C.memoryDate).toLocaleDateString()}),C.memoryLocation&&b.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[" ",C.memoryLocation]})]}),b.jsx("p",{className:"text-base whitespace-pre-wrap",children:C.memory}),C.tags&&C.tags.length>0&&b.jsx("div",{className:"flex flex-wrap gap-2",children:C.tags.map((M,F)=>b.jsx("span",{className:"px-2 py-1 bg-secondary text-secondary-foreground rounded-full text-xs",children:M},F))}),b.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[b.jsxs(Ae,{variant:"outline",onClick:()=>_(C.id),disabled:m.has(C.id),className:m.has(C.id)?"text-destructive":"",children:[b.jsx(gt,{className:`w-4 h-4 mr-2 ${m.has(C.id)?"fill-current":""}`}),C.likes," ",C.likes===1?"Like":"Likes"]}),b.jsxs(Ae,{variant:"outline",onClick:()=>R(C),children:[b.jsx(yt,{className:"w-4 h-4 mr-2"}),"Share"]})]})]})]})})}),b.jsx(wt,{open:e,onOpenChange:t,children:b.jsxs(At,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[b.jsx(Nt,{children:b.jsx(Ct,{className:"font-heading text-2xl",children:"Share a Memory"})}),r&&b.jsxs("div",{className:"bg-destructive/10 text-destructive p-3 rounded-lg flex items-start gap-2",children:[b.jsx(vt,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),b.jsx("p",{className:"text-sm",children:r})]}),b.jsx(gr,{onSubmit:y})]})})]})})}export{kr as MemoryWall};
